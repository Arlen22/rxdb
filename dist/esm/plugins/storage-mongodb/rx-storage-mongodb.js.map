{"version":3,"file":"rx-storage-mongodb.js","names":["ensureRxStorageInstanceParamsAreCorrect","DEFAULT_CHECKPOINT_SCHEMA","RX_STORAGE_NAME_MONGODB","createMongoDBStorageInstance","RxStorageMongoDBStatics","checkpointSchema","RxStorageMongoDB","databaseSettings","name","statics","_proto","prototype","createStorageInstance","params","getRxStorageMongoDB","storage"],"sources":["../../../../src/plugins/storage-mongodb/rx-storage-mongodb.ts"],"sourcesContent":["import type {\n    FilledMangoQuery,\n    RxDocumentData,\n    RxJsonSchema,\n    RxStorage,\n    RxStorageInstanceCreationParams,\n    RxStorageStatics\n} from '../../types/index.d.ts';\n\nimport { ensureRxStorageInstanceParamsAreCorrect } from '../../rx-storage-helper.ts';\nimport { DEFAULT_CHECKPOINT_SCHEMA, getPrimaryFieldOfPrimaryKey } from '../../rx-schema-helper.ts';\nimport { RX_STORAGE_NAME_MONGODB, primarySwapMongoDBQuerySelector, swapToMongoSort } from './mongodb-helper.ts';\nimport type { MongoDBDatabaseSettings, MongoDBPreparedQuery, MongoDBSettings, MongoDBStorageInternals } from './mongodb-types.ts';\nimport { RxStorageInstanceMongoDB, createMongoDBStorageInstance } from './rx-storage-instance-mongodb.ts';\n\n\nexport const RxStorageMongoDBStatics: RxStorageStatics = {\n    checkpointSchema: DEFAULT_CHECKPOINT_SCHEMA\n};\n\nexport class RxStorageMongoDB implements RxStorage<MongoDBStorageInternals, MongoDBSettings> {\n    public name = RX_STORAGE_NAME_MONGODB;\n    public statics = RxStorageMongoDBStatics;\n\n    constructor(\n        public databaseSettings: MongoDBDatabaseSettings\n    ) { }\n\n    public createStorageInstance<RxDocType>(\n        params: RxStorageInstanceCreationParams<RxDocType, MongoDBSettings>\n    ): Promise<RxStorageInstanceMongoDB<RxDocType>> {\n        ensureRxStorageInstanceParamsAreCorrect(params);\n        return createMongoDBStorageInstance(this, params, this.databaseSettings);\n    }\n}\n\nexport function getRxStorageMongoDB(\n    databaseSettings: MongoDBDatabaseSettings\n): RxStorageMongoDB {\n    const storage = new RxStorageMongoDB(databaseSettings);\n    return storage;\n}\n"],"mappings":"AASA,SAASA,uCAAuC,QAAQ,4BAA4B;AACpF,SAASC,yBAAyB,QAAqC,2BAA2B;AAClG,SAASC,uBAAuB,QAA0D,qBAAqB;AAE/G,SAAmCC,4BAA4B,QAAQ,kCAAkC;AAGzG,OAAO,IAAMC,uBAAyC,GAAG;EACrDC,gBAAgB,EAAEJ;AACtB,CAAC;AAED,WAAaK,gBAAgB;EAIzB,SAAAA,iBACWC,gBAAyC,EAClD;IAAA,KALKC,IAAI,GAAGN,uBAAuB;IAAA,KAC9BO,OAAO,GAAGL,uBAAuB;IAAA,KAG7BG,gBAAyC,GAAzCA,gBAAyC;EAChD;EAAC,IAAAG,MAAA,GAAAJ,gBAAA,CAAAK,SAAA;EAAAD,MAAA,CAEEE,qBAAqB,GAA5B,SAAAA,sBACIC,MAAmE,EACvB;IAC5Cb,uCAAuC,CAACa,MAAM,CAAC;IAC/C,OAAOV,4BAA4B,CAAC,IAAI,EAAEU,MAAM,EAAE,IAAI,CAACN,gBAAgB,CAAC;EAC5E,CAAC;EAAA,OAAAD,gBAAA;AAAA;AAGL,OAAO,SAASQ,mBAAmBA,CAC/BP,gBAAyC,EACzB;EAChB,IAAMQ,OAAO,GAAG,IAAIT,gBAAgB,CAACC,gBAAgB,CAAC;EACtD,OAAOQ,OAAO;AAClB"}