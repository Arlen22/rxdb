"use strict";(self.webpackChunkrxdb=self.webpackChunkrxdb||[]).push([[2061],{5668:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var r=n(4848),s=n(8453);const i={title:"Dexie.js RxStorage",slug:"rx-storage-dexie.html"},o="RxStorage Dexie.js",a={id:"rx-storage-dexie",title:"Dexie.js RxStorage",description:"To store the data inside of IndexedDB in the browser, you can use the Dexie.js RxStorage. Dexie.js is a minimal wrapper around IndexedDB and the Dexie.js RxStorage wraps that again to store RxDB data in the browser. For side projects and prototypes that run in a browser, you should use the dexie RxStorage as a default. For professional projects that care about performance and stability, use the IndexedDB RxStorage instead.",source:"@site/docs/rx-storage-dexie.md",sourceDirName:".",slug:"/rx-storage-dexie.html",permalink:"/rx-storage-dexie.html",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Dexie.js RxStorage",slug:"rx-storage-dexie.html"},sidebar:"tutorialSidebar",previous:{title:"Memory RxStorage",permalink:"/rx-storage-memory.html"},next:{title:"OPFS RxStorage \ud83d\udc51",permalink:"/rx-storage-opfs.html"}},d={},l=[{value:"Pros",id:"pros",level:2},{value:"Limitations",id:"limitations",level:2},{value:"Performance comparison with other RxStorage plugins",id:"performance-comparison-with-other-rxstorage-plugins",level:2},{value:"Usage",id:"usage",level:2},{value:"Overwrite/Polyfill the native IndexedDB",id:"overwritepolyfill-the-native-indexeddb",level:2},{value:"Using addons",id:"using-addons",level:2},{value:"Disabling the non-premium console log",id:"disabling-the-non-premium-console-log",level:2}];function x(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"rxstorage-dexiejs",children:"RxStorage Dexie.js"}),"\n",(0,r.jsxs)(t.p,{children:["To store the data inside of IndexedDB in the browser, you can use the ",(0,r.jsx)(t.a,{href:"https://github.com/dexie/Dexie.js",children:"Dexie.js"})," ",(0,r.jsx)(t.a,{href:"/rx-storage.html",children:"RxStorage"}),". Dexie.js is a minimal wrapper around IndexedDB and the Dexie.js RxStorage wraps that again to store RxDB data in the browser. For side projects and prototypes that run in a browser, you should use the dexie RxStorage as a default. For professional projects that care about performance and stability, use the ",(0,r.jsx)(t.a,{href:"/rx-storage-indexeddb.html",children:"IndexedDB RxStorage"})," instead."]}),"\n",(0,r.jsx)(t.h2,{id:"pros",children:"Pros"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Can use ",(0,r.jsx)(t.a,{href:"https://dexie.org/docs/Tutorial/Building-Addons",children:"Dexie.js addons"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"limitations",children:"Limitations"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Does not allow to use non-required fields as index, because that is ",(0,r.jsx)(t.a,{href:"https://github.com/pubkey/rxdb/pull/6643#issuecomment-2505310082",children:"not possible"})," with dexie.js. Use the ",(0,r.jsx)(t.a,{href:"/rx-storage-indexeddb.html",children:"IndexedDB RxStorage"})," if you need that."]}),"\n",(0,r.jsxs)(t.li,{children:["Does not use a ",(0,r.jsx)(t.a,{href:"/slow-indexeddb.html#batched-cursor",children:"Batched Cursor"})," or ",(0,r.jsx)(t.a,{href:"/slow-indexeddb.html#custom-indexes",children:"custom indexes"})," which makes queries slower compared to the ",(0,r.jsx)(t.a,{href:"/rx-storage-indexeddb.html",children:"IndexedDB RxStorage"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Does not support the ",(0,r.jsx)(t.a,{href:"/rx-storage-indexeddb.html#storage-buckets",children:"Storage Buckets API"})]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"performance-comparison-with-other-rxstorage-plugins",children:"Performance comparison with other RxStorage plugins"}),"\n",(0,r.jsx)(t.p,{children:"The performance of the Dexie.js RxStorage is good enough for most use cases but other storages can have way better performance metrics:"}),"\n",(0,r.jsx)("p",{align:"center",children:(0,r.jsx)("img",{src:"./files/rx-storage-performance-browser.png",alt:"RxStorage performance - browser Dexie.js",width:"700"})}),"\n",(0,r.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"import { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageDexie } from 'rxdb/plugins/storage-dexie';\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageDexie()\n});\n"})}),"\n",(0,r.jsx)(t.h2,{id:"overwritepolyfill-the-native-indexeddb",children:"Overwrite/Polyfill the native IndexedDB"}),"\n",(0,r.jsxs)(t.p,{children:["Node.js has no IndexedDB API. To still run the Dexie ",(0,r.jsx)(t.code,{children:"RxStorage"})," in Node.js, for example to run unit tests, you have to polyfill it.\nYou can do that by using the ",(0,r.jsx)(t.a,{href:"https://github.com/dumbmatter/fakeIndexedDB",children:"fake-indexeddb"})," module and pass it to the ",(0,r.jsx)(t.code,{children:"getRxStorageDexie()"})," function."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"import { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageDexie } from 'rxdb/plugins/storage-dexie';\n\n//> npm install fake-indexeddb --save\nconst fakeIndexedDB = require('fake-indexeddb');\nconst fakeIDBKeyRange = require('fake-indexeddb/lib/FDBKeyRange');\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageDexie({\n        indexedDB: fakeIndexedDB,\n        IDBKeyRange: fakeIDBKeyRange\n    })\n});\n\n"})}),"\n",(0,r.jsx)(t.h2,{id:"using-addons",children:"Using addons"}),"\n",(0,r.jsxs)(t.p,{children:["Dexie.js has its own plugin system with ",(0,r.jsx)(t.a,{href:"https://dexie.org/docs/DerivedWork#known-addons",children:"many plugins"})," for encryption, replication or other use cases. With the Dexie.js ",(0,r.jsx)(t.code,{children:"RxStorage"})," you can use the same plugins by passing them to the ",(0,r.jsx)(t.code,{children:"getRxStorageDexie()"})," function."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"const db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageDexie({\n        addons: [ /* Your Dexie.js plugins */ ]\n    })\n});\n"})}),"\n",(0,r.jsx)(t.h2,{id:"disabling-the-non-premium-console-log",children:"Disabling the non-premium console log"}),"\n",(0,r.jsxs)(t.p,{children:["We want to be transparent with our community, and you'll notice a console message when using the free Dexie.js based RxStorage implementation. This message serves to inform you about the availability of faster storage solutions within our ",(0,r.jsx)(t.a,{href:"/premium",children:"\ud83d\udc51 Premium Plugins"}),". We understand that this might be a minor inconvenience, and we sincerely apologize for that. However, maintaining and improving RxDB requires substantial resources, and our premium users help us ensure its sustainability. If you find value in RxDB and wish to remove this message, we encourage you to explore our premium storage options, which are optimized for professional use and production environments. Thank you for your understanding and support."]}),"\n",(0,r.jsxs)(t.p,{children:["If you already have premium access and want to use the Dexie.js ",(0,r.jsx)(t.a,{href:"/rx-storage.html",children:"RxStorage"})," without the log, you can call the ",(0,r.jsx)(t.code,{children:"setPremiumFlag()"})," function to disable the log."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"import { setPremiumFlag } from 'rxdb-premium/plugins/shared';\nsetPremiumFlag();\n"})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var r=n(6540);const s={},i=r.createContext(s);function o(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);