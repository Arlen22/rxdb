"use strict";(self.webpackChunkrxdb=self.webpackChunkrxdb||[]).push([[3237],{4183:(e,t,r)=>{r.d(t,{O9:()=>Mr,N8:()=>Br,dZ:()=>$r});var a=r(4127);function n(e,t){var r=e.get(t);if(void 0===r)throw new Error("missing value from map "+t);return r}function s(e,t,r,a){var n=e.get(t);return void 0===n?(n=r(),e.set(t,n)):a&&a(n),n}function i(e){return Object.assign({},e)}function o(e,t){if(void 0===t&&(t=!1),!e)return e;if(!t&&Array.isArray(e))return e.sort(((e,t)=>"string"==typeof e&&"string"==typeof t?e.localeCompare(t):"object"==typeof e?1:-1)).map((e=>o(e,t)));if("object"==typeof e&&!Array.isArray(e)){var r={};return Object.keys(e).sort(((e,t)=>e.localeCompare(t))).forEach((a=>{r[a]=o(e[a],t)})),r}return e}var c=function e(t){if(!t)return t;if(null===t||"object"!=typeof t)return t;if(Array.isArray(t)){for(var r=new Array(t.length),a=r.length;a--;)r[a]=e(t[a]);return r}var n={};for(var s in t)n[s]=e(t[s]);return n};function l(e,t,r){return Object.defineProperty(e,t,{get:function(){return r}}),r}var u=r(6087),h=r(75),d=r(3219),m=r(8953),p={isDevMode:()=>!1,deepFreezeWhenDevMode:e=>e,tunnelErrorMessage:e=>"RxDB Error-Code "+e+".\n        Error messages are not included in RxDB core to reduce build size.\n        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html\n        - or search for the error code here: https://github.com/pubkey/rxdb/search?q="+e+"\n        "};function f(e,t,r){return"RxError ("+t+"):\n"+e+"\n"+function(e){var t="";return 0===Object.keys(e).length?t:(t+="Given parameters: {\n",t+=Object.keys(e).map((t=>{var r="[object Object]";try{r="errors"===t?e[t].map((e=>JSON.stringify(e,Object.getOwnPropertyNames(e)))):JSON.stringify(e[t],(function(e,t){return void 0===t?null:t}),2)}catch(a){}return t+":"+r})).join("\n"),t+="}")}(r)}var v=function(e){function t(t,r,a){var n;void 0===a&&(a={});var s=f(r,t,a);return(n=e.call(this,s)||this).code=t,n.message=s,n.parameters=a,n.rxdb=!0,n}return(0,d.Z)(t,e),t.prototype.toString=function(){return this.message},(0,h.Z)(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}]),t}((0,m.Z)(Error)),g=function(e){function t(t,r,a){var n;void 0===a&&(a={});var s=f(r,t,a);return(n=e.call(this,s)||this).code=t,n.message=s,n.parameters=a,n.rxdb=!0,n}return(0,d.Z)(t,e),t.prototype.toString=function(){return this.message},(0,h.Z)(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}]),t}((0,m.Z)(TypeError));function y(e,t){return new v(e,p.tunnelErrorMessage(e),t)}function b(e,t){return new g(e,p.tunnelErrorMessage(e),t)}function x(e){return!(!e||409!==e.status)&&e}var w={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};var j=/\./g,k="abcdefghijklmnopqrstuvwxyz";function _(e){void 0===e&&(e=10);for(var t="",r=0;r<e;r++)t+=k.charAt(Math.floor(Math.random()*k.length));return t}function D(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function N(e){for(;"."===e.charAt(0);)e=e.substr(1);for(;"."===e.slice(-1);)e=e.slice(0,-1);return e}var I=e=>{var t=typeof e;return null!==e&&("object"===t||"function"===t)},E=new Set(["__proto__","prototype","constructor"]),R=new Set("0123456789");function C(e){var t=[],r="",a="start",n=!1;for(var s of e)switch(s){case"\\":if("index"===a)throw new Error("Invalid character in an index");if("indexEnd"===a)throw new Error("Invalid character after an index");n&&(r+=s),a="property",n=!n;break;case".":if("index"===a)throw new Error("Invalid character in an index");if("indexEnd"===a){a="property";break}if(n){n=!1,r+=s;break}if(E.has(r))return[];t.push(r),r="",a="property";break;case"[":if("index"===a)throw new Error("Invalid character in an index");if("indexEnd"===a){a="index";break}if(n){n=!1,r+=s;break}if("property"===a){if(E.has(r))return[];t.push(r),r=""}a="index";break;case"]":if("index"===a){t.push(Number.parseInt(r,10)),r="",a="indexEnd";break}if("indexEnd"===a)throw new Error("Invalid character after an index");default:if("index"===a&&!R.has(s))throw new Error("Invalid character in an index");if("indexEnd"===a)throw new Error("Invalid character after an index");"start"===a&&(a="property"),n&&(n=!1,r+="\\"),r+=s}switch(n&&(r+="\\"),a){case"property":if(E.has(r))return[];t.push(r);break;case"index":throw new Error("Index was not closed");case"start":t.push("")}return t}function S(e,t){if("number"!=typeof t&&Array.isArray(e)){var r=Number.parseInt(t,10);return Number.isInteger(r)&&e[r]===e[t]}return!1}function O(e,t,r){if(Array.isArray(t)&&(t=t.join(".")),!t.includes(".")&&!t.includes("["))return e[t];if(!I(e)||"string"!=typeof t)return void 0===r?e:r;var a=C(t);if(0===a.length)return r;for(var n=0;n<a.length;n++){var s=a[n];if(null==(e=S(e,s)?n===a.length-1?void 0:null:e[s])){if(n!==a.length-1)return r;break}}return void 0===e?r:e}var P=1;function T(){return{lwt:P}}function $(e,t){var r=t;return O(e,r=N(r="properties."+(r=r.replace(j,".properties."))))}function B(e,t,r){if("string"==typeof t.primaryKey)return r;var a=q(t,r),n=r[e];if(n&&n!==a)throw y("DOC19",{args:{documentData:r,existingPrimary:n,newPrimary:a},schema:t});return r[e]=a,r}function M(e){return"string"==typeof e?e:e.key}function q(e,t){if("string"==typeof e.primaryKey)return t[e.primaryKey];var r=e.primaryKey;return r.fields.map((e=>{var r=O(t,e);if(void 0===r)throw y("DOC18",{args:{field:e,documentData:t}});return r})).join(r.separator)}function A(e){var t=M((e=i(e)).primaryKey);e.properties=i(e.properties),e.additionalProperties=!1,e.hasOwnProperty("keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes?e.indexes.slice(0):[],e.required=e.required?e.required.slice(0):[],e.encrypted=e.encrypted?e.encrypted.slice(0):[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.properties._meta=L,e.required=e.required?e.required.slice(0):[],e.required.push("_deleted"),e.required.push("_rev"),e.required.push("_meta"),e.required.push("_attachments");var r=Q(e);return(0,u.gu)(e.required,r),e.required=e.required.filter((e=>!e.includes("."))).filter(((e,t,r)=>r.indexOf(e)===t)),e.version=e.version||0,e.indexes&&(e.indexes=e.indexes.map((e=>{var r=(0,u.AD)(e)?e.slice(0):[e];if(!r.includes(t)){var a=r.slice(0);return a.push(t),a}return r}))),e}var L={type:"object",properties:{lwt:{type:"number",minimum:P,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function Q(e){var t=Object.keys(e.properties).filter((t=>e.properties[t].final)),r=M(e.primaryKey);return t.push(r),"string"!=typeof e.primaryKey&&e.primaryKey.fields.forEach((e=>t.push(e))),t}var F=String.fromCharCode(65535),W=Number.MIN_VALUE;function H(e,t){var r=M(e.primaryKey),a=t.selector,n=e.indexes?e.indexes.slice(0):[];t.index?n=[t.index]:n.push([r]);var s,i=t.sort.map((e=>Object.keys(e)[0])).join(","),o=!!t.sort.find((e=>"desc"===Object.values(e)[0])),c=-1;return n.forEach((e=>{var r=!0,n=!0,l=e.map((e=>{var t=a[e],s=t?Object.keys(t):[],i={};t&&s.length?s.forEach((e=>{if(K.has(e)){var r=function(e,t){switch(e){case"$eq":return{startKey:t,endKey:t};case"$lte":return{endKey:t};case"$gte":return{startKey:t};case"$lt":return{endKey:t,inclusiveEnd:!1};case"$gt":return{startKey:t,inclusiveStart:!1};default:throw new Error("SNH")}}(e,t[e]);i=Object.assign(i,r)}})):i={startKey:n?W:F,endKey:r?F:W,inclusiveStart:!0,inclusiveEnd:!0};return void 0===i.startKey&&(i.startKey=W),void 0===i.endKey&&(i.endKey=F),void 0===i.inclusiveStart&&(i.inclusiveStart=!0),void 0===i.inclusiveEnd&&(i.inclusiveEnd=!0),n&&!i.inclusiveStart&&(n=!1),r&&!i.inclusiveEnd&&(r=!1),i})),h={index:e,startKeys:l.map((e=>e.startKey)),endKeys:l.map((e=>e.endKey)),inclusiveEnd:r,inclusiveStart:n,sortFieldsSameAsIndexFields:!o&&i===e.join(","),selectorSatisfiedByIndex:Z(e,t.selector)},d=function(e,t,r){var a=0,n=e=>{e>0&&(a+=e)},s=10,i=(0,u.r0)(r.startKeys,(e=>e!==W&&e!==F));n(i*s);var o=(0,u.r0)(r.startKeys,(e=>e!==F&&e!==W));n(o*s);var c=(0,u.r0)(r.startKeys,((e,t)=>e===r.endKeys[t]));n(c*s*1.5);var l=r.sortFieldsSameAsIndexFields?5:0;return n(l),a}(0,0,h);(d>0&&d>c||t.index)&&(c=d,s=h)})),s||(s={index:[r],startKeys:[W],endKeys:[F],inclusiveEnd:!0,inclusiveStart:!0,sortFieldsSameAsIndexFields:!o&&i===r,selectorSatisfiedByIndex:Z([r],t.selector)}),s}var K=new Set(["$eq","$gt","$gte","$lt","$lte"]),z=new Set(["$eq","$gt","$gte"]),U=new Set(["$eq","$lt","$lte"]);function Z(e,t){var r,a;return!Object.entries(t).find((t=>{let[r,a]=t;return!e.includes(r)||Object.entries(a).find((e=>{let[t,r]=e;return!K.has(t)}))}))&&(!e.find((e=>{var a=t[e];if(!a)return!1;var n=Object.keys(a).find((e=>z.has(e)));return!(!r||!n)||("$eq"!==n&&(r=n),!1)}))&&!e.find((e=>{var r=t[e];if(!r)return!1;var n=Object.keys(r).find((e=>U.has(e)));return!(!a||!n)||("$eq"!==n&&(a=n),!1)})))}var J="docs",Y="deleted-docs",V="changes",G="dexie",X={prepareQuery(e,t){if(!t.sort)throw y("SNH",{query:t});return{query:t,queryPlan:H(e,t)}},checkpointSchema:{type:"object",properties:{id:{type:"string"},lwt:{type:"number"}},required:["id","lwt"],additionalProperties:!1}},ee=new Map,te=new Map;var re="__";function ae(e){var t=e.split(".");if(t.length>1)return t.map((e=>ae(e))).join(".");if(e.startsWith("|")){var r=e.substring(1);return re+r}return e}function ne(e){var t=e.split(".");return t.length>1?t.map((e=>ne(e))).join("."):e.startsWith(re)?"|"+e.substring(re.length):e}function se(e){if(!e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return e;if(Array.isArray(e))return e.map((e=>se(e)));if("object"==typeof e){var t={};return Object.entries(e).forEach((e=>{let[r,a]=e;"object"==typeof a&&(a=se(a)),t[ae(r)]=a})),t}}function ie(e){if(!e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return e;if(Array.isArray(e))return e.map((e=>ie(e)));if("object"==typeof e){var t={};return Object.entries(e).forEach((r=>{let[a,n]=r;("object"==typeof n||Array.isArray(e))&&(n=ie(n)),t[ne(a)]=n})),t}}function oe(e){var t=[],r=M(e.primaryKey);return t.push([r]),e.indexes&&e.indexes.forEach((e=>{var r=(0,u.qo)(e);t.push(r)})),t.push(["_meta.lwt",r]),(t=t.map((e=>e.map((e=>ae(e)))))).map((e=>1===e.length?e[0]:"["+e.join("+")+"]")).join(", ")}async function ce(e,t){var r=await e,[a,n]=await Promise.all([r.dexieTable.bulkGet(t),r.dexieDeletedTable.bulkGet(t)]),s=n.slice(0);return a.forEach(((e,t)=>{e&&(s[t]=e)})),s}var le=r(6974),ue=r(984),he=r(4419),de=r(7400),me=r(6250),pe=r(7761),fe=r(7132),ve=r(6496),ge=r(6851),ye=r(3516),be=r(8039),xe=r(5308),we=r(2106),je=!1;function ke(e){return je||((0,pe.Qs)(pe.$M.PIPELINE,{$sort:ve.E3,$project:ve.FM}),(0,pe.Qs)(pe.$M.QUERY,{$and:ge.h$,$eq:ye.l3,$elemMatch:xe.rr,$exists:we.G,$gt:ye.ok,$gte:ye.m9,$in:ye.FI,$lt:ye.Ty,$lte:ye.HG,$ne:ye.ny,$nin:ye.IS,$mod:be.JD,$nor:ge.ps,$not:ge._w,$or:ge.Ko,$regex:be.GO,$size:xe.QH,$type:we.e}),je=!0),new fe.A(e)}function _e(e,t){var r=M(e.primaryKey);t=i(t);var a=c(t);if("number"!=typeof a.skip&&(a.skip=0),a.selector?(a.selector=a.selector,Object.entries(a.selector).forEach((e=>{let[t,r]=e;"object"==typeof r&&null!==r||(a.selector[t]={$eq:r})}))):a.selector={},a.index){var n=(0,u.qo)(a.index);n.includes(r)||n.push(r),a.index=n}if(a.sort)a.sort.find((e=>{return t=e,Object.keys(t)[0]===r;var t}))||(a.sort=a.sort.slice(0),a.sort.push({[r]:"asc"}));else if(a.index)a.sort=a.index.map((e=>({[e]:"asc"})));else{if(e.indexes){var s=new Set;Object.entries(a.selector).forEach((e=>{let[t,r]=e;("object"!=typeof r||null===r||!!Object.keys(r).find((e=>K.has(e))))&&s.add(t)}));var o,l=-1;e.indexes.forEach((e=>{var t=(0,u.AD)(e)?e:[e],r=t.findIndex((e=>!s.has(e)));r>0&&r>l&&(l=r,o=t)})),o&&(a.sort=o.map((e=>({[e]:"asc"}))))}a.sort||(a.sort=[{[r]:"asc"}])}return a}function De(e,t){if(!t.sort)throw y("SNH",{query:t});var r=[];t.sort.forEach((e=>{var t,a,n,s=Object.keys(e)[0],i=Object.values(e)[0];r.push({key:s,direction:i,getValueFn:(t=s,a=t.split("."),n=a.length,1===n?e=>e[t]:e=>{for(var t=e,r=0;r<n;++r)if(void 0===(t=t[a[r]]))return t;return t})})}));return(e,t)=>{for(var a=0;a<r.length;++a){var n=r[a],s=n.getValueFn(e),i=n.getValueFn(t);if(s!==i)return"asc"===n.direction?(0,me.qu)(s,i):(0,me.qu)(i,s)}}}function Ne(e,t){if(!t.sort)throw y("SNH",{query:t});var r=ke(t.selector);return e=>!e._deleted&&r.test(e)}function Ie(e){return e===W?-1/0:e}function Ee(e,t){if(!t){if("undefined"==typeof window)throw new Error("IDBKeyRange missing");t=window.IDBKeyRange}var r,a=e.startKeys.map(Ie),n=e.endKeys.map(Ie);if(1===e.index.length){var s=a[0]===n[0];r=t.bound(a[0],n[0],!s&&!e.inclusiveStart,!s&&!e.inclusiveEnd)}else r=t.bound(a,n,!e.inclusiveStart,!e.inclusiveEnd);return r}async function Re(e,t){var r=await e.internals,a=t.query,n=a.skip?a.skip:0,s=n+(a.limit?a.limit:1/0),i=t.queryPlan,o=!1;i.selectorSatisfiedByIndex||(o=Ne(e.schema,t.query));var c=Ee(i,r.dexieDb._options.IDBKeyRange),l=i.index,u=[];if(await r.dexieDb.transaction("r",r.dexieTable,(async t=>{var r,a,n=t.idbtrans.objectStore(J);1===l.length&&l[0]===e.primaryPath?r=n:(a=1===l.length?ae(l[0]):"["+l.map((e=>ae(e))).join("+")+"]",r=n.index(a));var h=r.openCursor(c);await new Promise((e=>{h.onsuccess=function(t){var r=t.target.result;if(r){var a=ie(r.value);a._deleted||o&&!o(a)||u.push(a),i.sortFieldsSameAsIndexFields&&u.length===s?e():r.continue()}else e()}}))})),!i.sortFieldsSameAsIndexFields){var h=De(e.schema,t.query);u=u.sort(h)}return{documents:u=u.slice(n,s)}}function Ce(e){var t=e.split("-");if(2!==t.length)throw new Error("malformatted revision: "+e);return{height:parseInt(t[0],10),hash:t[1]}}function Se(e){return parseInt(e.split("-")[0],10)}function Oe(e,t){var r=t?t._rev:null;return(r?Ce(r).height:0)+1+"-"+e}var Pe="_rxdb_internal";async function Te(e,t){var r=(await e.findDocumentsById([t],!1))[0];return r||void 0}async function $e(e,t,r){var a=await e.bulkWrite([t],r);if(a.error.length>0)throw a.error[0];return a.success[0]}function Be(e,t,r){var a=t.documentData,n=t.previousDocumentData;return{documentId:t.documentId,collectionName:r?r.name:void 0,isLocal:e,operation:t.operation,documentData:p.deepFreezeWhenDevMode(a),previousDocumentData:p.deepFreezeWhenDevMode(n)}}function Me(e,t,r,a){if(a)throw 409===a.status?y("CONFLICT",{collection:e.name,id:t,writeError:a,data:r}):422===a.status?y("VD2",{collection:e.name,id:t,writeError:a,data:r}):a}function qe(e){return{previous:e.previous,document:Ae(e.document)}}function Ae(e){if(!e._attachments||0===Object.keys(e._attachments).length)return e;var t=i(e);return t._attachments={},Object.entries(e._attachments).forEach((e=>{let[r,a]=e;var n,s,i;t._attachments[r]=(i=(n=a).data)?{length:(s=i,atob(s).length),digest:n.digest,type:n.type}:n})),t}function Le(e){var t=i(e);return t._meta=i(e._meta),t}function Qe(e,t,r){p.deepFreezeWhenDevMode(r);var a=M(r.primaryKey);var n={originalStorageInstance:t,schema:t.schema,internals:t.internals,collectionName:t.collectionName,databaseName:t.databaseName,options:t.options,bulkWrite(n,s){var o=n.map((n=>function(n){var s=i(n.document);if(s._meta=i(s._meta),p.isDevMode()){s=B(a,r,s);try{structuredClone(n)}catch(o){throw y("DOC24",{collection:t.collectionName,document:n.document})}n.previous,n.previous&&Object.keys(n.previous._meta).forEach((e=>{if(!n.document._meta.hasOwnProperty(e))throw y("SNH",{dataBefore:n.previous,dataAfter:n.document})}))}return s._meta.lwt=(0,ue.z)(),s._rev=Oe(e.token,n.previous),{document:s,previous:n.previous}}(n)));return e.lockedRun((()=>t.bulkWrite(o,s))).then((r=>{var a={error:[],success:r.success.slice(0)},n=r.error.filter((e=>!(409!==e.status||e.writeRow.previous||e.writeRow.document._deleted||!(0,de.Is)(e.documentInDb)._deleted)||(a.error.push(e),!1)));if(n.length>0){var i=n.map((t=>({previous:t.documentInDb,document:Object.assign({},t.writeRow.document,{_rev:Oe(e.token,t.documentInDb)})})));return e.lockedRun((()=>t.bulkWrite(i,s))).then((e=>((0,u.gu)(a.error,e.error),(0,u.gu)(a.success,e.success),a)))}return r}))},query:r=>e.lockedRun((()=>t.query(r))),count:r=>e.lockedRun((()=>t.count(r))),info:()=>e.lockedRun((()=>t.info())),findDocumentsById:(r,a)=>e.lockedRun((()=>t.findDocumentsById(r,a))),getAttachmentData:(r,a,n)=>e.lockedRun((()=>t.getAttachmentData(r,a,n))),getChangedDocumentsSince:(r,a)=>e.lockedRun((()=>t.getChangedDocumentsSince((0,de.Is)(r),a))),cleanup:r=>e.lockedRun((()=>t.cleanup(r))),remove:()=>(e.storageInstances.delete(n),e.lockedRun((()=>t.remove()))),close:()=>(e.storageInstances.delete(n),e.lockedRun((()=>t.close()))),changeStream:()=>t.changeStream(),conflictResultionTasks:()=>t.conflictResultionTasks(),resolveConflictResultionTask(e){if(e.output.isEqual)return t.resolveConflictResultionTask(e);var r=i(Object.assign({},e.output.documentData,{_meta:T(),_rev:"",_attachments:{}}));return delete r._meta,delete r._rev,delete r._attachments,t.resolveConflictResultionTask({id:e.id,output:{isEqual:!1,documentData:r}})}};return e.storageInstances.add(n),n}var Fe=r(5677),We=r(3981),He=new Map;function Ke(e,t){var r=He.get(e);if(r)return r.refs.delete(t),0===r.refs.size?(He.delete(e),r.bc.close()):void 0}function ze(e,t,r,a){if(t.multiInstance){var n=a||function(e,t,r,a){var n=He.get(t);return n||(n={bc:new We.g0(["RxDB:",e,r].join("|")),refs:new Set},He.set(t,n)),n.refs.add(a),n.bc}(e,t.databaseInstanceToken,r.databaseName,r),s=new le.x,i=r=>{r.storageName===e&&r.databaseName===t.databaseName&&r.collectionName===t.collectionName&&r.version===t.schema.version&&s.next(r.eventBulk)};n.addEventListener("message",i);var o=r.changeStream(),c=!1,l=o.subscribe((r=>{c||n.postMessage({storageName:e,databaseName:t.databaseName,collectionName:t.collectionName,version:t.schema.version,eventBulk:r})}));r.changeStream=function(){return s.asObservable().pipe((0,Fe.b)(o))};var u=r.close.bind(r);r.close=async function(){return c=!0,l.unsubscribe(),n.removeEventListener("message",i),a||await Ke(t.databaseInstanceToken,r),u()};var h=r.remove.bind(r);r.remove=async function(){return c=!0,l.unsubscribe(),n.removeEventListener("message",i),a||await Ke(t.databaseInstanceToken,r),h()}}}var Ue=(0,ue.z)(),Ze=function(){function e(e,t,r,a,n,s,i){this.changes$=new le.x,this.instanceId=Ue++,this.storage=e,this.databaseName=t,this.collectionName=r,this.schema=a,this.internals=n,this.options=s,this.settings=i,this.primaryPath=M(this.schema.primaryKey)}var t=e.prototype;return t.bulkWrite=async function(e,t){Ye(this),e.forEach((e=>{if(!e.document._rev||e.previous&&!e.previous._rev)throw y("SNH",{args:{row:e}})}));var r,a=await this.internals,n={success:[],error:[]},s=e.map((e=>e.document[this.primaryPath]));if(await a.dexieDb.transaction("rw",a.dexieTable,a.dexieDeletedTable,(async()=>{var i=new Map;(await ce(this.internals,s)).forEach((e=>{var t=e?ie(e):e;return t&&i.set(t[this.primaryPath],t),t})),r=function(e,t,r,a,n,s,i){for(var o,c=!!e.schema.attachments,l=[],u=[],h=[],d={id:_(10),events:[],checkpoint:null,context:n,startTime:(0,ue.z)(),endTime:0},m=d.events,p=[],f=[],v=[],g=r.size>0,b=a.length,x=function(){var e,n=a[w],d=n.document,b=n.previous,x=d[t],j=d._deleted,k=b&&b._deleted,_=void 0;if(g&&(_=r.get(x)),_){var D=_._rev;if(!b||b&&D!==b._rev){var N={isError:!0,status:409,documentId:x,writeRow:n,documentInDb:_};return h.push(N),1}var I=c?qe(n):n;c&&(j?b&&Object.keys(b._attachments).forEach((e=>{f.push({documentId:x,attachmentId:e,digest:(0,de.Is)(b)._attachments[e].digest})})):(Object.entries(d._attachments).find((t=>{let[r,a]=t;return(b?b._attachments[r]:void 0)||a.data||(e={documentId:x,documentInDb:_,isError:!0,status:510,writeRow:n,attachmentId:r}),!0})),e||Object.entries(d._attachments).forEach((e=>{let[t,r]=e;var a=b?b._attachments[t]:void 0;if(a){var n=I.document._attachments[t].digest;r.data&&a.digest!==n&&v.push({documentId:x,attachmentId:t,attachmentData:r,digest:r.digest})}else p.push({documentId:x,attachmentId:t,attachmentData:r,digest:r.digest})})))),e?h.push(e):(c?(u.push(qe(I)),i&&i(d)):(u.push(I),i&&i(d)),o=I);var E=null,R=null,C=null;if(k&&!j)C="INSERT",E=c?Ae(d):d;else if(!b||k||j){if(!j)throw y("SNH",{args:{writeRow:n}});C="DELETE",E=(0,de.Is)(d),R=b}else C="UPDATE",E=c?Ae(d):d,R=b;var S={documentId:x,documentData:E,previousDocumentData:R,operation:C};m.push(S)}else{var O=!!j;if(c&&Object.entries(d._attachments).forEach((t=>{let[r,a]=t;a.data?p.push({documentId:x,attachmentId:r,attachmentData:a,digest:a.digest}):(e={documentId:x,isError:!0,status:510,writeRow:n,attachmentId:r},h.push(e))})),e||(c?(l.push(qe(n)),s&&s(d)):(l.push(n),s&&s(d)),o=n),!O){var P={documentId:x,operation:"INSERT",documentData:c?Ae(d):d,previousDocumentData:c&&b?Ae(b):b};m.push(P)}}},w=0;w<b;w++)x();return{bulkInsertDocs:l,bulkUpdateDocs:u,newestRow:o,errors:h,eventBulk:d,attachmentsAdd:p,attachmentsRemove:f,attachmentsUpdate:v}}(this,this.primaryPath,i,e,t),n.error=r.errors;var o=[],c=[],l=[],u=[];r.bulkInsertDocs.forEach((e=>{n.success.push(e.document),o.push(e.document)})),r.bulkUpdateDocs.forEach((e=>{var t=e.document[this.primaryPath];if(n.success.push(e.document),e.document._deleted&&e.previous&&!e.previous._deleted)c.push(t),l.push(e.document);else if(e.document._deleted&&e.previous&&e.previous._deleted)l.push(e.document);else{if(e.document._deleted)throw y("SNH",{args:{row:e}});o.push(e.document)}})),await Promise.all([o.length>0?a.dexieTable.bulkPut(o.map((e=>se(e)))):he.$Y,c.length>0?a.dexieTable.bulkDelete(c):he.$Y,l.length>0?a.dexieDeletedTable.bulkPut(l.map((e=>se(e)))):he.$Y,u.length>0?a.dexieDeletedTable.bulkDelete(u):he.$Y])})),(r=(0,de.Is)(r)).eventBulk.events.length>0){var i=(0,de.Is)(r.newestRow).document;r.eventBulk.checkpoint={id:i[this.primaryPath],lwt:i._meta.lwt},r.eventBulk.endTime=(0,ue.z)(),this.changes$.next(r.eventBulk)}return n},t.findDocumentsById=async function(e,t){Ye(this);var r=await this.internals,a=[];return await r.dexieDb.transaction("r",r.dexieTable,r.dexieDeletedTable,(async()=>{var n;n=t?await ce(this.internals,e):await r.dexieTable.bulkGet(e),e.forEach(((e,r)=>{var s=n[r];!s||s._deleted&&!t||a.push(ie(s))}))})),a},t.query=function(e){return Ye(this),Re(this,e)},t.count=async function(e){if(e.queryPlan.selectorSatisfiedByIndex){var t=await async function(e,t){var r=await e.internals,a=t.queryPlan,n=a.index,s=Ee(a,r.dexieDb._options.IDBKeyRange),i=-1;return await r.dexieDb.transaction("r",r.dexieTable,(async t=>{var r,a,o=t.idbtrans.objectStore(J);1===n.length&&n[0]===e.primaryPath?r=o:(a=1===n.length?ae(n[0]):"["+n.map((e=>ae(e))).join("+")+"]",r=o.index(a));var c=r.count(s);i=await new Promise(((e,t)=>{c.onsuccess=function(){e(c.result)},c.onerror=e=>t(e)}))})),i}(this,e);return{count:t,mode:"fast"}}return{count:(await Re(this,e)).documents.length,mode:"slow"}},t.info=async function(){var e=await this.internals,t={totalCount:-1};return await e.dexieDb.transaction("r",e.dexieTable,e.dexieDeletedTable,(async r=>{var[a,n]=await Promise.all([e.dexieTable.count(),e.dexieDeletedTable.count()]);t.totalCount=a+n})),t},t.getChangedDocumentsSince=async function(e,t){Ye(this);var r,a=t?t.lwt:P,n=t?t.id:"",s=await this.internals,[i,o]=await Promise.all([s.dexieTable,s.dexieDeletedTable].map((async t=>{var r=t.where("[_meta.lwt+"+this.primaryPath+"]").above([a,n]).limit(e);return(await r.toArray()).map((e=>ie(e)))}))),c=i.slice(0);(0,u.gu)(c,o),r=this.primaryPath,c=c.sort(function(e){return(t,r)=>t._meta.lwt===r._meta.lwt?r[e]<t[e]?1:-1:t._meta.lwt-r._meta.lwt}(r)),c=c.slice(0,e);var l=(0,u.SI)(c);return{documents:c,checkpoint:l?{id:l[this.primaryPath],lwt:l._meta.lwt}:t||{id:"",lwt:0}}},t.changeStream=function(){return Ye(this),this.changes$.asObservable()},t.cleanup=async function(e){Ye(this);var t=await this.internals;return await t.dexieDb.transaction("rw",t.dexieDeletedTable,(async()=>{var r=(0,ue.z)()-e,a=(await t.dexieDeletedTable.where("_meta.lwt").below(r).toArray()).map((e=>e[this.primaryPath]));await t.dexieDeletedTable.bulkDelete(a)})),!0},t.getAttachmentData=function(e,t,r){throw Ye(this),new Error("Attachments are not implemented in the dexie RxStorage. Make a pull request.")},t.remove=async function(){Ye(this);var e=await this.internals;return await Promise.all([e.dexieDeletedTable.clear(),e.dexieTable.clear()]),this.close()},t.close=function(){return this.closed||(this.closed=(async()=>{this.changes$.complete(),await async function(e){var t=await e,r=te.get(e)-1;0===r?(t.dexieDb.close(),te.delete(e)):te.set(e,r)}(this.internals)})()),this.closed},t.conflictResultionTasks=function(){return new le.x},t.resolveConflictResultionTask=async function(e){},e}();function Je(e,t,r){var n=function(e,t,r,n){var o=M(n.primaryKey),c="rxdb-dexie-"+e+"--"+n.version+"--"+t,l=s(ee,c,(()=>{var e=(async()=>{var e=i(r);e.autoOpen=!1;var t=new a.U(c,e),s={[J]:oe(n),[V]:"++sequence, id",[Y]:o+",_meta.lwt,[_meta.lwt+"+o+"]"};return t.version(1).stores(s),await t.open(),{dexieDb:t,dexieTable:t[J],dexieDeletedTable:t[Y]}})();return ee.set(c,l),te.set(l,0),e}));return l}(t.databaseName,t.collectionName,r,t.schema),o=new Ze(e,t.databaseName,t.collectionName,t.schema,n,t.options,r);return ze(G,t,o),Promise.resolve(o)}function Ye(e){if(e.closed)throw new Error("RxStorageInstanceDexie is closed "+e.databaseName+"-"+e.collectionName)}var Ve=function(){function e(e){this.name=G,this.statics=X,this.settings=e}return e.prototype.createStorageInstance=function(e){return function(e){if(e.schema.keyCompression)throw y("UT5",{args:{params:e}});if((t=e.schema).encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)throw y("UT6",{args:{params:e}});var t;if(e.schema.attachments&&e.schema.attachments.compression)throw y("UT7",{args:{params:e}})}(e),function(e){if(e.indexes){var t=new Set;e.indexes.forEach((r=>{(0,u.qo)(r).forEach((a=>{if(!t.has(a)&&(t.add(a),"boolean"===$(e,a).type))throw y("DXE1",{schema:e,index:r,field:a})}))}))}}(e.schema),Je(this,e,this.settings)},e}();function Ge(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var r,a;if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(a=r;0!=a--;)if(!Ge(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var n=Object.keys(e);if((r=n.length)!==Object.keys(t).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(t,n[a]))return!1;for(a=r;0!=a--;){var s=n[a];if(!Ge(e[s],t[s]))return!1}return!0}return e!=e&&t!=t}var Xe={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function et(e,t){Xe[e]&&Xe[e].forEach((e=>e(t)))}function tt(e,t){return Promise.all(Xe[e].map((e=>e(t))))}var rt=function(){function e(e,t){this.jsonSchema=e,this.hashFunction=t,this.indexes=function(e){return(e.indexes||[]).map((e=>(0,u.AD)(e)?e:[e]))}(this.jsonSchema),this.primaryPath=M(this.jsonSchema.primaryKey),this.finalFields=Q(this.jsonSchema)}var t=e.prototype;return t.validateChange=function(e,t){this.finalFields.forEach((r=>{if(!Ge(e[r],t[r]))throw y("DOC9",{dataBefore:e,dataAfter:t,fieldName:r,schema:this.jsonSchema})}))},t.getDocumentPrototype=function(){var e={},t=$(this.jsonSchema,"");return Object.keys(t).forEach((t=>{var r=t;e.__defineGetter__(t,(function(){if(this.get&&"function"==typeof this.get)return this.get(r)})),Object.defineProperty(e,t+"$",{get:function(){return this.get$(r)},enumerable:!1,configurable:!1}),Object.defineProperty(e,t+"_",{get:function(){return this.populate(r)},enumerable:!1,configurable:!1})})),l(this,"getDocumentPrototype",(()=>e)),e},t.getPrimaryOfDocumentData=function(e){return q(this.jsonSchema,e)},(0,h.Z)(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var e={};return Object.entries(this.jsonSchema.properties).filter((e=>{let[,t]=e;return t.hasOwnProperty("default")})).forEach((t=>{let[r,a]=t;return e[r]=a.default})),l(this,"defaultValues",e)}},{key:"hash",get:function(){return l(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}]),e}();function at(e,t,r){void 0===r&&(r=!0),r&&et("preCreateRxSchema",e);var a=A(e);a=function(e){return o(e,!0)}(a),p.deepFreezeWhenDevMode(a);var n=new rt(a,t);return et("createRxSchema",n),n}var nt=r(598),st=r(6621),it=r(6728),ot=r(6005),ct=r(7570);function lt(e){var t=e.split("-"),r="RxDB";return t.forEach((e=>{r+=D(e)})),r+="Plugin",new Error("You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { "+r+" } from 'rxdb/plugins/"+e+"';\n            addRxPlugin("+r+");\n        ")}function ut(e){return e.documentData?e.documentData:e.previousDocumentData}var ht=function(){function e(e,t,r,a){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=e,this.primaryPath=t,this.preWrite=r,this.postWrite=a}var t=e.prototype;return t.addWrite=function(e,t){var r=e[this.primaryPath],a=s(this.queueByDocId,r,(()=>[]));return new Promise(((r,n)=>{var s={lastKnownDocumentState:e,modifier:t,resolve:r,reject:n};(0,de.Is)(a).push(s),this.triggerRun()}))},t.triggerRun=async function(){if(!0!==this.isRunning&&0!==this.queueByDocId.size){this.isRunning=!0;var e=[],t=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(t.entries()).map((async t=>{let[r,a]=t;var n,s,i,o=(n=a.map((e=>e.lastKnownDocumentState)),s=n[0],i=Ce(s._rev).height,n.forEach((e=>{var t=Ce(e._rev).height;t>i&&(s=e,i=t)})),s),l=o;for(var u of a)try{l=await u.modifier(c(l))}catch(h){u.reject(h),u.reject=()=>{},u.resolve=()=>{}}try{await this.preWrite(l,o)}catch(h){return void a.forEach((e=>e.reject(h)))}e.push({previous:o,document:l})})));var r=e.length>0?await this.storageInstance.bulkWrite(e,"incremental-write"):{error:[],success:[]};return await Promise.all(r.success.map((e=>{var r=e[this.primaryPath];this.postWrite(e),n(t,r).forEach((t=>t.resolve(e)))}))),r.error.forEach((e=>{var r,a=e.documentId,i=n(t,a),o=x(e);if(o){var c=s(this.queueByDocId,a,(()=>[]));i.reverse().forEach((e=>{e.lastKnownDocumentState=(0,de.Is)(o.documentInDb),(0,de.Is)(c).unshift(e)}))}else{var l=y("COL20",{name:w[(r=e).status],document:r.documentId,writeError:r});i.forEach((e=>e.reject(l)))}})),this.isRunning=!1,this.triggerRun()}},e}();function dt(e){return async t=>{var r=function(e){return Object.assign({},e,{_meta:void 0,_deleted:void 0,_rev:void 0})}(t);r._deleted=t._deleted;var a=await e(r),n=Object.assign({},a,{_meta:t._meta,_attachments:t._attachments,_rev:t._rev,_deleted:void 0!==a._deleted?a._deleted:t._deleted});return void 0===n._deleted&&(n._deleted=!1),n}}var mt={get primaryPath(){if(this.isInstanceOfRxDocument)return this.collection.schema.primaryPath},get primary(){var e=this;if(e.isInstanceOfRxDocument)return e._data[e.primaryPath]},get revision(){if(this.isInstanceOfRxDocument)return this._data._rev},get deleted$(){if(this.isInstanceOfRxDocument)return this.$.pipe((0,nt.U)((e=>e._data._deleted)))},get deleted(){if(this.isInstanceOfRxDocument)return this._data._deleted},getLatest(){var e=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(e)},get $(){return this.collection.$.pipe((0,st.h)((e=>!e.isLocal)),(0,st.h)((e=>e.documentId===this.primary)),(0,nt.U)((e=>ut(e))),(0,it.O)(this.collection._docCache.getLatestDocumentData(this.primary)),(0,ot.x)(((e,t)=>e._rev===t._rev)),(0,nt.U)((e=>this.collection._docCache.getCachedRxDocument(e))),(0,ct.d)(de.kv))},get$(e){if(p.isDevMode()){if(e.includes(".item."))throw y("DOC1",{path:e});if(e===this.primaryPath)throw y("DOC2");if(this.collection.schema.finalFields.includes(e))throw y("DOC3",{path:e});if(!$(this.collection.schema.jsonSchema,e))throw y("DOC4",{path:e})}return this.$.pipe((0,nt.U)((t=>O(t,e))),(0,ot.x)())},populate(e){var t=$(this.collection.schema.jsonSchema,e),r=this.get(e);if(!r)return he.m5;if(!t)throw y("DOC5",{path:e});if(!t.ref)throw y("DOC6",{path:e,schemaObj:t});var a=this.collection.database.collections[t.ref];if(!a)throw y("DOC7",{ref:t.ref,path:e,schemaObj:t});return"array"===t.type?a.findByIds(r).exec().then((e=>{var t=e.values();return Array.from(t)})):a.findOne(r).exec()},get(e){return s(this._propertyCache,e,(()=>{var t=O(this._data,e);if("object"!=typeof t||null===t||Array.isArray(t))return p.deepFreezeWhenDevMode(t);var r=this;return new Proxy(i(t),{get(t,a){if("string"!=typeof a)return t[a];var n=a.charAt(a.length-1);if("$"===n){var s=a.slice(0,-1);return r.get$(N(e+"."+s))}if("_"===n){var i=a.slice(0,-1);return r.populate(N(e+"."+i))}return r.get(N(e+"."+a))}})}))},toJSON(e){if(void 0===e&&(e=!1),e)return p.deepFreezeWhenDevMode(this._data);var t=i(this._data);return delete t._rev,delete t._attachments,delete t._deleted,delete t._meta,p.deepFreezeWhenDevMode(t)},toMutableJSON(e){return void 0===e&&(e=!1),c(this.toJSON(e))},update(e){throw lt("update")},incrementalUpdate(e){throw lt("update")},updateCRDT(e){throw lt("crdt")},putAttachment(){throw lt("attachments")},getAttachment(){throw lt("attachments")},allAttachments(){throw lt("attachments")},get allAttachments$(){throw lt("attachments")},async modify(e,t){var r=this._data,a=await dt(e)(r);return this._saveData(a,r)},incrementalModify(e,t){return this.collection.incrementalWriteQueue.addWrite(this._data,dt(e)).then((e=>this.collection._docCache.getCachedRxDocument(e)))},patch(e){var t=this._data,r=c(t);return Object.entries(e).forEach((e=>{let[t,a]=e;r[t]=a})),this._saveData(r,t)},incrementalPatch(e){return this.incrementalModify((t=>(Object.entries(e).forEach((e=>{let[r,a]=e;t[r]=a})),t)))},async _saveData(e,t){if(e=i(e),this._data._deleted)throw y("DOC11",{id:this.primary,document:this});await ft(this.collection,e,t);var r=await this.collection.storageInstance.bulkWrite([{previous:t,document:e}],"rx-document-save-data"),a=r.error[0];return Me(this.collection,this.primary,e,a),await this.collection._runHooks("post","save",e,this),this.collection._docCache.getCachedRxDocument(r.success[0])},remove(){var e=this.collection;if(this.deleted)return Promise.reject(y("DOC13",{document:this,id:this.primary}));var t,r=i(this._data);return e._runHooks("pre","remove",r,this).then((async()=>{r._deleted=!0;var t=await e.storageInstance.bulkWrite([{previous:this._data,document:r}],"rx-document-remove"),a=t.error[0];return Me(e,this.primary,r,a),t.success[0]})).then((e=>(t=e,this.collection._runHooks("post","remove",r,this)))).then((()=>this.collection._docCache.getCachedRxDocument(t)))},incrementalRemove(){return this.incrementalModify((async e=>(await this.collection._runHooks("pre","remove",e,this),e._deleted=!0,e))).then((async e=>(await this.collection._runHooks("post","remove",e._data,e),e)))},destroy(){throw y("DOC14")}};function pt(e){void 0===e&&(e=mt);var t=function(e,t){this.collection=e,this._data=t,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return t.prototype=e,t}function ft(e,t,r){return t._meta=Object.assign({},r._meta,t._meta),p.isDevMode()&&e.schema.validateChange(r,t),e._runHooks("pre","save",t,r)}var vt=r(10),gt=r(6871),yt=r(3028),bt=r(1556),xt=r(8456);function wt(e,t){return t.sort&&0!==t.sort.length?t.sort.map((e=>Object.keys(e)[0])):[e]}var jt=new WeakMap;function kt(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};var r=function(e){return s(jt,e,(()=>{var t=e.collection,r=_e(t.storageInstance.schema,c(e.mangoQuery)),a=t.schema.primaryPath,n=De(t.schema.jsonSchema,r),s=Ne(t.schema.jsonSchema,r);return{primaryKey:e.collection.schema.primaryPath,skip:r.skip,limit:r.limit,sortFields:wt(a,r),sortComparator:(t,r)=>{var a={docA:t,docB:r,rxQuery:e};return n(a.docA,a.docB)},queryMatcher:t=>s({doc:t,rxQuery:e}.doc)}}))}(e),a=(0,de.Is)(e._result).docsData.slice(0),n=(0,de.Is)(e._result).docsDataMap,i=!1;return t.map((e=>function(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:p.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData?e.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}}(e))).filter(u.S7).find((e=>{var t={queryParams:r,changeEvent:e,previousResults:a,keyDocumentMap:n},s=(0,xt.Rf)(t);return"runFullQueryAgain"===s||("doNothing"!==s?(i=!0,(0,xt.wu)(s,r,e,a,n),!1):void 0)}))?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:i,newResults:a}}var _t=function(){function e(){this._map=new Map}return e.prototype.getByQuery=function(e){var t=e.toString();return s(this._map,t,(()=>e))},e}();function Dt(e,t){t.uncached=!0;var r=t.toString();e._map.delete(r)}function Nt(e){return e.refCount$.observers.length}var It,Et,Rt=(It=100,Et=3e4,(e,t)=>{if(!(t._map.size<It)){var r=(0,ue.z)()-Et,a=[],n=Array.from(t._map.values());for(var s of n)Nt(s)>0||(0===s._lastEnsureEqual&&s._creationTime<r?Dt(t,s):a.push(s));var i=a.length-It;i<=0||a.sort(((e,t)=>e._lastEnsureEqual-t._lastEnsureEqual)).slice(0,i).forEach((e=>Dt(t,e)))}}),Ct=new WeakSet;var St=function(){function e(e,t,r){this.cacheItemByDocId=new Map,this.registry="function"==typeof FinalizationRegistry?new FinalizationRegistry((e=>{var t=e.docId,r=this.cacheItemByDocId.get(t);r&&(r.byRev.delete(e.revisionHeight),0===r.byRev.size&&this.cacheItemByDocId.delete(t))})):void 0,this.registerIdleTasks=[],this.primaryPath=e,this.changes$=t,this.documentCreator=r,t.subscribe((e=>{var t=e.documentId,r=this.cacheItemByDocId.get(t);if(r){var a=ut(e);r.last=a}}))}var t=e.prototype;return t.getLatestDocumentData=function(e){return n(this.cacheItemByDocId,e).last},t.getLatestDocumentDataIfExists=function(e){var t=this.cacheItemByDocId.get(e);if(t)return t.last},(0,h.Z)(e,[{key:"getCachedRxDocument",get:function(){return l(this,"getCachedRxDocument",function(e){var t=e.primaryPath,r=e.cacheItemByDocId,a=e.registry,n=p.deepFreezeWhenDevMode,i=e.documentCreator,o=o=>{var c=o[t],l=Se(o._rev),u=s(r,c,(()=>function(e){return{byRev:new Map,last:e}}(o))),h=u.byRev,d=h.get(l),m=d?d.deref():void 0;return m||(o=n(o),m=i(o),h.set(l,Pt(m)),a&&(e.registerIdleTasks.push(m),e.registerIdlePromise||(e.registerIdlePromise=(0,he.y$)().then((()=>{e.registerIdlePromise=void 0;var t=e.registerIdleTasks;0!==t.length&&(e.registerIdleTasks=[],t.forEach((e=>{a.register(e,{docId:e.primary,revisionHeight:Se(e.revision)})})))}))))),m};return o}(this))}}]),e}();function Ot(e,t){for(var r=e.getCachedRxDocument,a=[],n=0;n<t.length;n++){var s=r(t[n]);a.push(s)}return a}var Pt="function"==typeof WeakRef?function(e){return new WeakRef(e)}:function(e){return{deref:()=>e}};var Tt=function(){function e(e,t,r){this.time=(0,ue.z)(),this.collection=e,this.count=r,this.documents=Ot(this.collection._docCache,t)}return(0,h.Z)(e,[{key:"docsData",get:function(){return l(this,"docsData",this.documents.map((e=>e._data)))}},{key:"docsDataMap",get:function(){var e=new Map;return this.documents.forEach((t=>{e.set(t.primary,t._data)})),l(this,"docsDataMap",e)}},{key:"docsMap",get:function(){for(var e=new Map,t=this.documents,r=0;r<t.length;r++){var a=t[r];e.set(a.primary,a)}return l(this,"docsMap",e)}}]),e}(),$t=0,Bt=function(){function e(e,t,r,a){void 0===a&&(a={}),this.id=++$t,this._execOverDatabaseCount=0,this._creationTime=(0,ue.z)(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new vt.X(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=he.kZ,this.op=e,this.mangoQuery=t,this.collection=r,this.other=a,t||(this.mangoQuery={selector:{}}),this.isFindOneByIdQuery=function(e,t){if(!t.skip&&t.selector&&1===Object.keys(t.selector).length&&t.selector[e]){var r=t.selector[e];if("string"==typeof r)return r;if(1===Object.keys(r).length&&"string"==typeof r.$eq)return r.$eq;if(1===Object.keys(r).length&&Array.isArray(r.$eq)&&!r.$eq.find((e=>"string"!=typeof e)))return r.$eq}return!1}(this.collection.schema.primaryPath,t)}var t=e.prototype;return t._setResultData=function(e){if("number"!=typeof e){e instanceof Map&&(e=Array.from(e.values()));var t=new Tt(this.collection,e,e.length);this._result=t}else this._result=new Tt(this.collection,[],e)},t._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=(0,ue.z)(),"count"===this.op){var e=this.getPreparedQuery(),t=await this.collection.storageInstance.count(e);if("slow"!==t.mode||this.collection.database.allowSlowCount)return t.count;throw y("QU14",{collection:this.collection,queryObj:this.mangoQuery})}if("findByIds"===this.op){var r=(0,de.Is)(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,a=new Map,n=[];if(r.forEach((e=>{var t=this.collection._docCache.getLatestDocumentDataIfExists(e);if(t){if(!t._deleted){var r=this.collection._docCache.getCachedRxDocument(t);a.set(e,r)}}else n.push(e)})),n.length>0)(await this.collection.storageInstance.findDocumentsById(n,!1)).forEach((e=>{var t=this.collection._docCache.getCachedRxDocument(e);a.set(t.primary,t)}));return a}var s=async function(e){var t=[],r=e.collection;if(e.isFindOneByIdQuery)if(Array.isArray(e.isFindOneByIdQuery)){var a=e.isFindOneByIdQuery;if(a=a.filter((r=>{var a=e.collection._docCache.getLatestDocumentDataIfExists(r);return!a||(a._deleted||t.push(a),!1)})),a.length>0){var n=await r.storageInstance.findDocumentsById(a,!1);(0,u.gu)(t,n)}}else{var s=e.isFindOneByIdQuery,i=e.collection._docCache.getLatestDocumentDataIfExists(s);if(!i){var o=await r.storageInstance.findDocumentsById([s],!1);o[0]&&(i=o[0])}i&&!i._deleted&&t.push(i)}else{var c=e.getPreparedQuery(),l=await r.storageInstance.query(c);t=l.documents}return t}(this);return s.then((e=>(this._lastExecEnd=(0,ue.z)(),e)))},t.exec=function(e){if(e&&"findOne"!==this.op)throw y("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return At(this).then((()=>(0,gt.z)(this.$))).then((t=>{if(!t&&e)throw y("QU10",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return t}))},t.toString=function(){var e=o({op:this.op,query:this.mangoQuery,other:this.other},!0),t=JSON.stringify(e);return this.toString=()=>t,t},t.getPreparedQuery=function(){var e={rxQuery:this,mangoQuery:_e(this.collection.schema.jsonSchema,this.mangoQuery)};et("prePrepareQuery",e);var t=this.collection.database.storage.statics.prepareQuery(this.collection.schema.jsonSchema,e.mangoQuery);return this.getPreparedQuery=()=>t,t},t.doesDocumentDataMatch=function(e){return!e._deleted&&this.queryMatcher(e)},t.remove=function(){return this.exec().then((e=>Array.isArray(e)?Promise.all(e.map((e=>e.remove()))):e.remove()))},t.update=function(e){throw lt("update")},t.where=function(e){throw lt("query-builder")},t.sort=function(e){throw lt("query-builder")},t.skip=function(e){throw lt("query-builder")},t.limit=function(e){throw lt("query-builder")},(0,h.Z)(e,[{key:"$",get:function(){if(!this._$){var e=this.collection.$.pipe((0,st.h)((e=>!e.isLocal)),(0,it.O)(null),(0,bt.z)((()=>At(this))),(0,nt.U)((()=>this._result)),(0,ct.d)(de.kv),(0,ot.x)(((e,t)=>!(!e||e.time!==(0,de.Is)(t).time))),(0,st.h)((e=>!!e)),(0,nt.U)((e=>{var t=(0,de.Is)(e);return"count"===this.op?t.count:"findOne"===this.op?0===t.documents.length?null:t.documents[0]:"findByIds"===this.op?t.docsMap:t.documents.slice(0)})));this._$=(0,yt.T)(e,this.refCount$.pipe((0,st.h)((()=>!1))))}return this._$}},{key:"queryMatcher",get:function(){this.collection.schema.jsonSchema;return l(this,"queryMatcher",Ne(0,_e(this.collection.schema.jsonSchema,this.mangoQuery)))}},{key:"asRxQuery",get:function(){return this}}]),e}();function Mt(e,t,r,a){et("preCreateRxQuery",{op:e,queryObj:t,collection:r,other:a});var n,s,i=new Bt(e,t,r,a);return i=(n=i).collection._queryCache.getByQuery(n),s=r,Ct.has(s)||(Ct.add(s),(0,he.Y3)().then((()=>(0,he.C2)(200))).then((()=>{s.destroyed||s.cacheReplacementPolicy(s,s._queryCache),Ct.delete(s)}))),i}function qt(e){var t=e.asRxQuery.collection._changeEventBuffer.counter;return e._latestChangeEvent>=t}function At(e){return e.collection.database.destroyed||qt(e)?he.kZ:(e._ensureEqualQueue=e._ensureEqualQueue.then((()=>function(e){if(e._lastEnsureEqual=(0,ue.z)(),e.collection.database.destroyed||qt(e))return he.kZ;var t=!1,r=!1;-1===e._latestChangeEvent&&(r=!0);if(!r){var a=e.asRxQuery.collection._changeEventBuffer.getFrom(e._latestChangeEvent+1);if(null===a)r=!0;else{e._latestChangeEvent=e.asRxQuery.collection._changeEventBuffer.counter;var n=e.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(a);if("count"===e.op){var s=(0,de.Is)(e._result).count,i=s;n.forEach((t=>{var r=t.previousDocumentData&&e.doesDocumentDataMatch(t.previousDocumentData),a=e.doesDocumentDataMatch(t.documentData);!r&&a&&i++,r&&!a&&i--})),i!==s&&(t=!0,e._setResultData(i))}else{var o=kt(e,n);o.runFullQueryAgain?r=!0:o.changed&&(t=!0,e._setResultData(o.newResults))}}}if(r){var c=e.collection._changeEventBuffer.counter;return e._execOverDatabase().then((r=>(e._latestChangeEvent=c,"number"==typeof r?(e._result&&r===e._result.count||(t=!0,e._setResultData(r)),t):(e._result&&function(e,t,r){if(t.length!==r.length)return!1;for(var a=0,n=t.length;a<n;){var s=t[a],i=r[a];if(a++,s._rev!==i._rev||s[e]!==i[e])return!1}return!0}(e.collection.schema.primaryPath,r,e._result.docsData)||(t=!0,e._setResultData(r)),t))))}return Promise.resolve(t)}(e))),e._ensureEqualQueue)}var Lt="collection",Qt="storage-token",Ft=A({version:0,title:"RxInternalDocument",primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[Lt,Qt,"rx-migration-status","OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Wt(e,t){return q(Ft,{key:e,context:t})}async function Ht(e,t){var r=e.prepareQuery(t.schema,{selector:{context:Lt},sort:[{id:"asc"}],skip:0});return(await t.query(r)).documents}var Kt="storageToken",zt=Wt(Kt,Qt);function Ut(e,t){return e+"-"+t.version}function Zt(e,t){return t=function(e,t){for(var r=Object.keys(e.defaultValues),a=0;a<r.length;++a){var n=r[a];t.hasOwnProperty(n)&&void 0!==t[n]||(t[n]=e.defaultValues[n])}return t}(e,t=i(t)),(t=B(e.primaryPath,e.jsonSchema,t))._meta=T(),t.hasOwnProperty("_deleted")||(t._deleted=!1),t.hasOwnProperty("_attachments")||(t._attachments={}),t.hasOwnProperty("_rev")||(t._rev=""),t}async function Jt(e,t,r,a,n,s,i){var o=(await Ht(e.statics,t)).filter((e=>e.data.name===n)),c=[];o.forEach((e=>{c.push({collectionName:e.data.name,schema:e.data.schema,isCollection:!0}),e.data.connectedStorages.forEach((e=>c.push({collectionName:e.collectionName,isCollection:!1,schema:e.schema})))}));var l=new Set;if(c=c.filter((e=>{var t=e.collectionName+"||"+e.schema.version;return!l.has(t)&&(l.add(t),!0)})),await Promise.all(c.map((async t=>{var i=await e.createStorageInstance({collectionName:t.collectionName,databaseInstanceToken:r,databaseName:a,multiInstance:!1,options:{},schema:t.schema,password:s,devMode:p.isDevMode()});await i.remove(),t.isCollection&&await tt("postRemoveRxCollection",{storage:e,databaseName:a,collectionName:n})}))),i){var u=o.map((e=>{var t=Le(e);return t._deleted=!0,t._meta.lwt=(0,ue.z)(),t._rev=Oe(r,e),{previous:e,document:t}}));await t.bulkWrite(u,"rx-database-remove-collection-all")}}var Yt=function(){function e(e){this.subs=[],this.limit=100,this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.collection=e,this.subs.push(this.collection.$.pipe((0,st.h)((e=>!e.isLocal))).subscribe((e=>this._handleChangeEvent(e))))}var t=e.prototype;return t._handleChangeEvent=function(e){for(this.counter++,this.buffer.push(e),this.eventCounterMap.set(e,this.counter);this.buffer.length>this.limit;)this.buffer.shift()},t.getArrayIndexByPointer=function(e){var t=this.buffer[0],r=this.eventCounterMap.get(t);return e<r?null:e-r},t.getFrom=function(e){var t=[],r=this.getArrayIndexByPointer(e);if(null===r)return null;for(;;){var a=this.buffer[r];if(r++,!a)return t;t.push(a)}},t.runFrom=function(e,t){var r=this.getFrom(e);if(null===r)throw new Error("out of bounds");r.forEach((e=>t(e)))},t.reduceByLastOfDoc=function(e){return e.slice(0)},t.destroy=function(){this.subs.forEach((e=>e.unsubscribe()))},e}();var Vt=new WeakMap;function Gt(e){var t=e.schema.getDocumentPrototype(),r=function(e){var t={};return Object.entries(e.methods).forEach((e=>{let[r,a]=e;t[r]=a})),t}(e),a={};return[t,r,mt].forEach((e=>{Object.getOwnPropertyNames(e).forEach((t=>{var r=Object.getOwnPropertyDescriptor(e,t),n=!0;(t.startsWith("_")||t.endsWith("_")||t.startsWith("$")||t.endsWith("$"))&&(n=!1),"function"==typeof r.value?Object.defineProperty(a,t,{get(){return r.value.bind(this)},enumerable:n,configurable:!1}):(r.enumerable=n,r.configurable=!1,r.writable&&(r.writable=!1),Object.defineProperty(a,t,r))}))})),a}function Xt(e,t){var r=function(e,t,r){var a=new e(t,r);return et("createRxDocument",a),a}(function(e){return s(Vt,e,(()=>pt(Gt(e))))}(e),e,p.deepFreezeWhenDevMode(t));return e._runHooksSync("post","create",t,r),et("postCreateRxDocument",r),r}var er=function(e,t){return Ge(Ae(e.newDocumentState),Ae(e.realMasterState))?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:e.realMasterState})};var tr=["pre","post"],rr=["insert","save","remove","create"],ar=!1,nr=function(){function e(e,t,r,a,n,s,i,o,c,l,u,h){void 0===n&&(n={}),void 0===s&&(s={}),void 0===i&&(i={}),void 0===o&&(o={}),void 0===c&&(c={}),void 0===l&&(l=Rt),void 0===u&&(u={}),void 0===h&&(h=er),this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=new _t,this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.database=e,this.name=t,this.schema=r,this.internalStorageInstance=a,this.instanceCreationOptions=n,this.migrationStrategies=s,this.methods=i,this.attachments=o,this.options=c,this.cacheReplacementPolicy=l,this.statics=u,this.conflictHandler=h,function(e){if(ar)return;ar=!0;var t=Object.getPrototypeOf(e);rr.forEach((e=>{tr.map((r=>{var a=r+D(e);t[a]=function(t,a){return this.addHook(r,e,t,a)}}))}))}(this.asRxCollection)}var t=e.prototype;return t.prepare=async function(){this.storageInstance=Qe(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new ht(this.storageInstance,this.schema.primaryPath,((e,t)=>ft(this,e,t)),(e=>this._runHooks("post","save",e)));var e,t=this.database.eventBulks$.pipe((0,st.h)((e=>e.collectionName===this.name)));this.$=t.pipe((0,bt.z)((e=>e.events))),this.checkpoint$=t.pipe((0,nt.U)((e=>e.checkpoint))),this._changeEventBuffer=(e=this.asRxCollection,new Yt(e)),this._docCache=new St(this.schema.primaryPath,this.$.pipe((0,st.h)((e=>!e.isLocal))),(e=>Xt(this.asRxCollection,e)));var r=await this.database.storageToken,a=this.storageInstance.changeStream().subscribe((e=>{var t={id:e.id,internal:!1,collectionName:this.name,storageToken:r,events:e.events.map((e=>Be(!1,e,this))),databaseToken:this.database.token,checkpoint:e.checkpoint,context:e.context,endTime:e.endTime,startTime:e.startTime};this.database.$emit(t)}));return this._subs.push(a),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe((e=>{this.conflictHandler(e.input,e.context).then((t=>{this.storageInstance.resolveConflictResultionTask({id:e.id,output:t})}))}))),he.$Y},t.cleanup=function(e){throw lt("cleanup")},t.migrationNeeded=function(){throw lt("migration")},t.getMigrationState=function(){throw lt("migration")},t.startMigration=function(e){return void 0===e&&(e=10),this.getMigrationState().startMigration(e)},t.migratePromise=function(e){return void 0===e&&(e=10),this.getMigrationState().migratePromise(e)},t.insert=async function(e){var t=await this.bulkInsert([e]),r=t.error[0];return Me(this,e[this.schema.primaryPath],e,r),(0,de.Is)(t.success[0])},t.bulkInsert=async function(e){if(0===e.length)return{success:[],error:[]};var t=this.schema.primaryPath,r=e.map((e=>Zt(this.schema,e))),a=this.hasHooks("pre","insert")?await Promise.all(r.map((e=>this._runHooks("pre","insert",e).then((()=>e))))):r,n=a.map((e=>({document:e}))),s=await this.storageInstance.bulkWrite(n,"rx-collection-bulk-insert"),i=Ot(this._docCache,s.success);if(this.hasHooks("post","insert")){var o=new Map;a.forEach((e=>{o.set(e[t],e)})),await Promise.all(i.map((e=>this._runHooks("post","insert",o.get(e.primary),e))))}return{success:i,error:s.error}},t.bulkRemove=async function(e){var t=this.schema.primaryPath;if(0===e.length)return{success:[],error:[]};var r=await this.findByIds(e).exec(),a=[],s=new Map;Array.from(r.values()).forEach((e=>{var t=e.toMutableJSON(!0);a.push(t),s.set(e.primary,t)})),await Promise.all(a.map((e=>{var t=e[this.schema.primaryPath];return this._runHooks("pre","remove",e,r.get(t))})));var o=a.map((e=>{var t=i(e);return t._deleted=!0,{previous:e,document:t}})),c=await this.storageInstance.bulkWrite(o,"rx-collection-bulk-remove"),l=c.success.map((e=>e[t]));return await Promise.all(l.map((e=>this._runHooks("post","remove",s.get(e),r.get(e))))),{success:l.map((e=>n(r,e))),error:c.error}},t.bulkUpsert=async function(e){var t=[],r=new Map;e.forEach((e=>{var a=Zt(this.schema,e),n=a[this.schema.primaryPath];if(!n)throw y("COL3",{primaryPath:this.schema.primaryPath,data:a,schema:this.schema.jsonSchema});r.set(n,a),t.push(a)}));var a=await this.bulkInsert(t),s=a.success.slice(0),i=[];return await Promise.all(a.error.map((async e=>{if(409!==e.status)i.push(e);else{var t=e.documentId,a=n(r,t),o=(0,de.Is)(e.documentInDb),c=this._docCache.getCachedRxDocument(o),l=await c.incrementalModify((()=>a));s.push(l)}}))),{error:i,success:s}},t.upsert=async function(e){var t=await this.bulkUpsert([e]);return Me(this.asRxCollection,e[this.schema.primaryPath],e,t.error[0]),t.success[0]},t.incrementalUpsert=function(e){var t=Zt(this.schema,e),r=t[this.schema.primaryPath];if(!r)throw y("COL4",{data:e});var a=this._incrementalUpsertQueues.get(r);return a||(a=he.$Y),a=a.then((()=>function(e,t,r){var a=e._docCache.getLatestDocumentDataIfExists(t);if(a)return Promise.resolve({doc:e._docCache.getCachedRxDocument(a),inserted:!1});return e.findOne(t).exec().then((t=>t?{doc:t,inserted:!1}:e.insert(r).then((e=>({doc:e,inserted:!0})))))}(this,r,t))).then((e=>e.inserted?e.doc:function(e,t){return e.incrementalModify((e=>t))}(e.doc,t))),this._incrementalUpsertQueues.set(r,a),a},t.find=function(e){if("string"==typeof e)throw y("COL5",{queryObj:e});return e||(e={selector:{}}),Mt("find",e,this)},t.findOne=function(e){if("number"==typeof e||Array.isArray(e))throw b("COL6",{queryObj:e});var t;if("string"==typeof e)t=Mt("findOne",{selector:{[this.schema.primaryPath]:e},limit:1},this);else{if(e||(e={selector:{}}),e.limit)throw y("QU6");(e=i(e)).limit=1,t=Mt("findOne",e,this)}return t},t.count=function(e){return e||(e={selector:{}}),Mt("count",e,this)},t.findByIds=function(e){return Mt("findByIds",{selector:{[this.schema.primaryPath]:{$in:e.slice(0)}}},this)},t.exportJSON=function(){throw lt("json-dump")},t.importJSON=function(e){throw lt("json-dump")},t.insertCRDT=function(e){throw lt("crdt")},t.addHook=function(e,t,r,a){if(void 0===a&&(a=!1),"function"!=typeof r)throw b("COL7",{key:t,when:e});if(!tr.includes(e))throw b("COL8",{key:t,when:e});if(!rr.includes(t))throw y("COL9",{key:t});if("post"===e&&"create"===t&&!0===a)throw y("COL10",{when:e,key:t,parallel:a});var n=r.bind(this),s=a?"parallel":"series";this.hooks[t]=this.hooks[t]||{},this.hooks[t][e]=this.hooks[t][e]||{series:[],parallel:[]},this.hooks[t][e][s].push(n)},t.getHooks=function(e,t){return this.hooks[t]&&this.hooks[t][e]?this.hooks[t][e]:{series:[],parallel:[]}},t.hasHooks=function(e,t){var r=this.getHooks(e,t);return!!r&&(r.series.length>0||r.parallel.length>0)},t._runHooks=function(e,t,r,a){var n=this.getHooks(e,t);if(!n)return he.$Y;var s=n.series.map((e=>()=>e(r,a)));return(0,he.Ze)(s).then((()=>Promise.all(n.parallel.map((e=>e(r,a))))))},t._runHooksSync=function(e,t,r,a){var n=this.getHooks(e,t);n&&n.series.forEach((e=>e(r,a)))},t.promiseWait=function(e){return new Promise((t=>{var r=setTimeout((()=>{this.timeouts.delete(r),t()}),e);this.timeouts.add(r)}))},t.destroy=function(){return this.destroyed?he.kZ:(this.destroyed=!0,Array.from(this.timeouts).forEach((e=>clearTimeout(e))),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then((()=>Promise.all(this.onDestroy.map((e=>e()))))).then((()=>this.storageInstance.close())).then((()=>(this._subs.forEach((e=>e.unsubscribe())),delete this.database.collections[this.name],tt("postDestroyRxCollection",this).then((()=>!0))))))},t.remove=async function(){await this.destroy(),await Jt(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)},(0,h.Z)(e,[{key:"insert$",get:function(){return this.$.pipe((0,st.h)((e=>"INSERT"===e.operation)))}},{key:"update$",get:function(){return this.$.pipe((0,st.h)((e=>"UPDATE"===e.operation)))}},{key:"remove$",get:function(){return this.$.pipe((0,st.h)((e=>"DELETE"===e.operation)))}},{key:"asRxCollection",get:function(){return this}}]),e}();var sr=r(7782),ir=r(6753);var or="undefined"!=typeof crypto&&void 0!==crypto.subtle&&"function"==typeof crypto.subtle.digest?async function(e){var t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t);return Array.prototype.map.call(new Uint8Array(r),(e=>("00"+e.toString(16)).slice(-2))).join("")}:function(e){return Promise.resolve((0,ir.JQ)(e))},cr=r(5898),lr=new Set,ur=function(){function e(e,t,r,a,n,s,i,o,c,l,u,h){void 0===i&&(i=!1),void 0===o&&(o={}),this.idleQueue=new sr.F,this.rxdbVersion="15.0.0-beta.30",this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.eventBulks$=new le.x,this.observable$=this.eventBulks$.pipe((0,bt.z)((e=>e.events))),this.storageToken=he.kZ,this.storageTokenDocument=he.kZ,this.emittedEventBulkIds=new cr.i(6e4),this.name=e,this.token=t,this.storage=r,this.instanceCreationOptions=a,this.password=n,this.multiInstance=s,this.eventReduce=i,this.options=o,this.internalStore=c,this.hashFunction=l,this.cleanupPolicy=u,this.allowSlowCount=h,"pseudoInstance"!==this.name&&(this.internalStore=Qe(this.asRxDatabase,c,Ft),this.storageTokenDocument=async function(e){var t=_(10),r=e.password?await e.hashFunction(JSON.stringify(e.password)):void 0,a={id:zt,context:Qt,key:Kt,data:{rxdbVersion:e.rxdbVersion,token:t,instanceToken:e.token,passwordHash:r},_deleted:!1,_meta:T(),_rev:"",_attachments:{}},n=await e.internalStore.bulkWrite([{document:a}],"internal-add-storage-token");if(n.success[0])return n.success[0];var s=(0,de.Is)(n.error[0]);if(s.isError&&x(s)){var i=s;if(c=i.documentInDb.data.rxdbVersion,l=e.rxdbVersion,!c||l.includes("beta")&&l!==c||c.split(".")[0]!==l.split(".")[0])throw y("DM5",{args:{databaseStateVersion:i.documentInDb.data.rxdbVersion,codeVersion:e.rxdbVersion}});if(r&&r!==i.documentInDb.data.passwordHash)throw y("DB1",{passwordHash:r,existingPasswordHash:i.documentInDb.data.passwordHash});var o=i.documentInDb;return(0,de.Is)(o)}var c,l;throw s}(this.asRxDatabase).catch((e=>this.startupErrors.push(e))),this.storageToken=this.storageTokenDocument.then((e=>e.data.token)).catch((e=>this.startupErrors.push(e))))}var t=e.prototype;return t.$emit=function(e){this.emittedEventBulkIds.has(e.id)||(this.emittedEventBulkIds.add(e.id),this.eventBulks$.next(e))},t.removeCollectionDoc=async function(e,t){var r=await Te(this.internalStore,Wt(Ut(e,t),Lt));if(!r)throw y("SNH",{name:e,schema:t});var a=Le(r);a._deleted=!0,await this.internalStore.bulkWrite([{document:a,previous:r}],"rx-database-remove-collection")},t.addCollections=async function(e){var t={},r={},a=[],n={};await Promise.all(Object.entries(e).map((async e=>{let[s,o]=e;var c=s,l=o.schema;t[c]=l;var u=at(l,this.hashFunction);if(r[c]=u,this.collections[s])throw y("DB3",{name:s});var h=Ut(s,l),d={id:Wt(h,Lt),key:h,context:Lt,data:{name:c,schemaHash:await u.hash,schema:u.jsonSchema,version:u.version,connectedStorages:[]},_deleted:!1,_meta:T(),_rev:"",_attachments:{}};a.push({document:d});var m=Object.assign({},o,{name:c,schema:u,database:this}),p=i(o);p.database=this,p.name=s,et("preCreateRxCollection",p),m.conflictHandler=p.conflictHandler,n[c]=m})));var s=await this.internalStore.bulkWrite(a,"rx-database-add-collection");await async function(e){if(await e.storageToken,e.startupErrors[0])throw e.startupErrors[0]}(this),await Promise.all(s.error.map((async e=>{if(409!==e.status)throw y("DB12",{database:this.name,writeError:e});var a=(0,de.Is)(e.documentInDb),n=a.data.name,s=r[n];if(a.data.schemaHash!==await s.hash)throw y("DB6",{database:this.name,collection:n,previousSchemaHash:a.data.schemaHash,schemaHash:await s.hash,previousSchema:a.data.schema,schema:(0,de.Is)(t[n])})})));var o={};return await Promise.all(Object.keys(e).map((async e=>{var t=n[e],r=await function(e){let{database:t,name:r,schema:a,instanceCreationOptions:n={},migrationStrategies:s={},autoMigrate:i=!0,statics:o={},methods:c={},attachments:l={},options:u={},localDocuments:h=!1,cacheReplacementPolicy:d=Rt,conflictHandler:m=er}=e;var f={databaseInstanceToken:t.token,databaseName:t.name,collectionName:r,schema:a.jsonSchema,options:n,multiInstance:t.multiInstance,password:t.password,devMode:p.isDevMode()};return et("preCreateRxStorageInstance",f),async function(e,t){return t.multiInstance=e.multiInstance,await e.storage.createStorageInstance(t)}(t,f).then((e=>{var p=new nr(t,r,a,e,n,s,c,l,u,d,o,m);return p.prepare().then((()=>{Object.entries(o).forEach((e=>{let[t,r]=e;Object.defineProperty(p,t,{get:()=>r.bind(p)})}));var e=he.$Y;return i&&0!==p.schema.version&&(e=p.migratePromise()),e})).then((()=>(et("createRxCollection",{collection:p,creator:{name:r,schema:a,storageInstance:e,instanceCreationOptions:n,migrationStrategies:s,methods:c,attachments:l,options:u,cacheReplacementPolicy:d,localDocuments:h,statics:o}}),p))).catch((t=>e.close().then((()=>Promise.reject(t)))))}))}(t);o[e]=r,this.collections[e]=r,this[e]||Object.defineProperty(this,e,{get:()=>this.collections[e]})}))),o},t.lockedRun=function(e){return this.idleQueue.wrapCall(e)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(e){throw lt("json-dump")},t.importJSON=function(e){throw lt("json-dump")},t.backup=function(e){throw lt("backup")},t.leaderElector=function(){throw lt("leader-election")},t.isLeader=function(){throw lt("leader-election")},t.waitForLeadership=function(){throw lt("leader-election")},t.migrationStates=function(){throw lt("migration")},t.destroy=async function(){return this.destroyed?he.kZ:(this.destroyed=!0,await tt("preDestroyRxDatabase",this),this.eventBulks$.complete(),this._subs.map((e=>e.unsubscribe())),"pseudoInstance"===this.name?he.kZ:this.requestIdlePromise().then((()=>Promise.all(this.onDestroy.map((e=>e()))))).then((()=>Promise.all(Object.keys(this.collections).map((e=>this.collections[e])).map((e=>e.destroy()))))).then((()=>this.internalStore.close())).then((()=>lr.delete(this.name))).then((()=>!0)))},t.remove=function(){return this.destroy().then((()=>async function(e,t,r){var a=_(10),n=await hr(a,t,e,{},!1,r),s=await Ht(t.statics,n),i=new Set;s.forEach((e=>i.add(e.data.name)));var o=Array.from(i);return await Promise.all(o.map((s=>Jt(t,n,a,e,s,r)))),await tt("postRemoveRxDatabase",{databaseName:e,storage:t}),await n.remove(),o}(this.name,this.storage,this.password)))},(0,h.Z)(e,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}]),e}();async function hr(e,t,r,a,n,s){return await t.createStorageInstance({databaseInstanceToken:e,databaseName:r,collectionName:Pe,schema:Ft,options:a,multiInstance:n,password:s,devMode:p.isDevMode()})}function dr(e){let{storage:t,instanceCreationOptions:r,name:a,password:n,multiInstance:s=!0,eventReduce:i=!0,ignoreDuplicate:o=!1,options:c={},cleanupPolicy:l,allowSlowCount:u=!1,localDocuments:h=!1,hashFunction:d=or}=e;et("preCreateRxDatabase",{storage:t,instanceCreationOptions:r,name:a,password:n,multiInstance:s,eventReduce:i,ignoreDuplicate:o,options:c,localDocuments:h}),o||function(e){if(lr.has(e))throw y("DB8",{name:e,link:"https://pubkey.github.io/rxdb/rx-database.html#ignoreduplicate"})}(a),lr.add(a);var m=_(10);return hr(m,t,a,r,s,n).catch((e=>{throw lr.delete(a),e})).then((e=>{var p=new ur(a,m,t,r,n,s,i,c,e,d,l,u);return tt("createRxDatabase",{database:p,creator:{storage:t,instanceCreationOptions:r,name:a,password:n,multiInstance:s,eventReduce:i,ignoreDuplicate:o,options:c,localDocuments:h}}).then((()=>p))}))}var mr={RxSchema:rt.prototype,RxDocument:mt,RxQuery:Bt.prototype,RxCollection:nr.prototype,RxDatabase:ur.prototype},pr=new Set,fr=new Set;var vr=function(e){function t(t,r,a){var n;return(n=e.call(this,null,r)||this).id=t,n.parent=a,n}return(0,d.Z)(t,e),t}(pt()),gr={get isLocal(){return!0},get allAttachments$(){throw y("LD1",{document:this})},get primaryPath(){return"id"},get primary(){return this.id},get $(){var e=n(wr,this.parent);return this.parent.$.pipe((0,st.h)((e=>e.documentId===this.primary)),(0,st.h)((e=>e.isLocal)),(0,nt.U)((e=>ut(e))),(0,it.O)(e.docCache.getLatestDocumentData(this.primary)),(0,ot.x)(((e,t)=>e._rev===t._rev)),(0,nt.U)((t=>e.docCache.getCachedRxDocument(t))),(0,ct.d)(de.kv))},getLatest(){var e=n(wr,this.parent),t=e.docCache.getLatestDocumentData(this.primary);return e.docCache.getCachedRxDocument(t)},get(e){if(e="data."+e,this._data){if("string"!=typeof e)throw b("LD2",{objPath:e});var t=O(this._data,e);return t=p.deepFreezeWhenDevMode(t)}},get$(e){if(e="data."+e,p.isDevMode()){if(e.includes(".item."))throw y("LD3",{objPath:e});if(e===this.primaryPath)throw y("LD4")}return this.$.pipe((0,nt.U)((e=>e._data)),(0,nt.U)((t=>O(t,e))),(0,ot.x)())},async incrementalModify(e){var t=await kr(this.parent);return t.incrementalWriteQueue.addWrite(this._data,(async t=>(t.data=await e(t.data,this),t))).then((e=>t.docCache.getCachedRxDocument(e)))},incrementalPatch(e){return this.incrementalModify((t=>(Object.entries(e).forEach((e=>{let[r,a]=e;t[r]=a})),t)))},async _saveData(e){var t=await kr(this.parent),r=this._data;return e.id=this.id,t.storageInstance.bulkWrite([{previous:r,document:e}],"local-document-save-data").then((t=>{var r=t.success[0];if(!r)throw t.error[0];(e=i(e))._rev=r._rev}))},async remove(){var e=await kr(this.parent),t={id:this._data.id,data:{},_deleted:!0,_meta:T(),_rev:"",_attachments:{}};return $e(e.storageInstance,{previous:this._data,document:t},"local-document-remove").then((t=>e.docCache.getCachedRxDocument(t)))}},yr=!1,br=()=>{if(!yr){yr=!0;var e=mt;Object.getOwnPropertyNames(e).forEach((t=>{if(!Object.getOwnPropertyDescriptor(gr,t)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(gr,t,r)}}));["populate","update","putAttachment","getAttachment","allAttachments"].forEach((e=>gr[e]=(e=>()=>{throw y("LD6",{functionName:e})})(e)))}};var xr=new WeakMap,wr=new WeakMap;function jr(e){var t=e.database?e.database:e,r=e.database?e.name:"",a=(async()=>{var a=await _r(t.token,t.storage,t.name,r,t.instanceCreationOptions,t.multiInstance);a=Qe(t,a,Er);var n=new St("id",e.$.pipe((0,st.h)((e=>e.isLocal))),(t=>function(e,t){br();var r=new vr(e.id,e,t);return Object.setPrototypeOf(r,gr),r.prototype=gr,r}(t,e))),s=new ht(a,"id",(()=>{}),(()=>{})),i=await t.storageToken,o=a.changeStream().subscribe((r=>{var a={id:r.id,internal:!1,collectionName:e.database?e.name:void 0,storageToken:i,events:r.events.map((t=>Be(!0,t,e.database?e:void 0))),databaseToken:t.token,checkpoint:r.checkpoint,context:r.context,endTime:r.endTime,startTime:r.startTime};t.$emit(a)}));e._subs.push(o);var c={database:t,parent:e,storageInstance:a,docCache:n,incrementalWriteQueue:s};return wr.set(e,c),c})();xr.set(e,a)}function kr(e){var t=xr.get(e);if(!t){var r=e.database?e.database:e,a=e.database?e.name:"";throw y("LD8",{database:r.name,collection:a})}return t}function _r(e,t,r,a,n,s){return t.createStorageInstance({databaseInstanceToken:e,databaseName:r,collectionName:Ir(a),schema:Er,options:n,multiInstance:s,devMode:p.isDevMode()})}function Dr(e){var t=xr.get(e);if(t)return xr.delete(e),t.then((e=>e.storageInstance.close()))}async function Nr(e,t,r){var a=_(10),n=await _r(a,e,t,r,{},!1);await n.remove()}function Ir(e){return"plugin-local-documents-"+e}var Er=A({title:"RxLocalDocument",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:128},data:{type:"object",additionalProperties:!0}},required:["id","data"]});async function Rr(e,t){var r=await kr(this),a={id:e,data:t,_deleted:!1,_meta:T(),_rev:"",_attachments:{}};return $e(r.storageInstance,{document:a},"local-document-insert").then((e=>r.docCache.getCachedRxDocument(e)))}function Cr(e,t){return this.getLocal(e).then((r=>r?r.incrementalModify((()=>t)):this.insertLocal(e,t)))}async function Sr(e){var t=await kr(this),r=t.docCache,a=r.getLatestDocumentDataIfExists(e);return a?Promise.resolve(r.getCachedRxDocument(a)):Te(t.storageInstance,e).then((e=>e?t.docCache.getCachedRxDocument(e):null))}function Or(e){return this.$.pipe((0,it.O)(null),(0,bt.z)((async t=>t?{changeEvent:t}:{doc:await this.getLocal(e)})),(0,bt.z)((async t=>{if(t.changeEvent){var r=t.changeEvent;return r.isLocal&&r.documentId===e?{use:!0,doc:await this.getLocal(e)}:{use:!1}}return{use:!0,doc:t.doc}})),(0,st.h)((e=>e.use)),(0,nt.U)((e=>e.doc)))}var Pr={name:"local-documents",rxdb:!0,prototypes:{RxCollection:e=>{e.insertLocal=Rr,e.upsertLocal=Cr,e.getLocal=Sr,e.getLocal$=Or},RxDatabase:e=>{e.insertLocal=Rr,e.upsertLocal=Cr,e.getLocal=Sr,e.getLocal$=Or}},hooks:{createRxDatabase:{before:e=>{e.creator.localDocuments&&jr(e.database)}},createRxCollection:{before:e=>{e.creator.localDocuments&&jr(e.collection)}},preDestroyRxDatabase:{after:e=>Dr(e)},postDestroyRxCollection:{after:e=>Dr(e)},postRemoveRxDatabase:{after:e=>Nr(e.storage,e.databaseName,"")},postRemoveRxCollection:{after:e=>Nr(e.storage,e.databaseName,e.collectionName)}},overwritable:{}};let Tr;function $r(){return"undefined"!=typeof window&&window.indexedDB}function Br(){return Tr||(Tr=(async()=>{!function(e){if(et("preAddRxPlugin",{plugin:e,plugins:pr}),!pr.has(e)){if(fr.has(e.name))throw y("PL3",{name:e.name,plugin:e});if(pr.add(e),fr.add(e.name),!e.rxdb)throw b("PL1",{plugin:e});e.init&&e.init(),e.prototypes&&Object.entries(e.prototypes).forEach((e=>{let[t,r]=e;return r(mr[t])})),e.overwritable&&Object.assign(p,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach((e=>{let[t,r]=e;r.after&&Xe[t].push(r.after),r.before&&Xe[t].unshift(r.before)}))}}(Pr);var e;return await dr({name:"rxdb-landing-v3",localDocuments:!0,storage:(void 0===e&&(e={}),new Ve(e))})})()),Tr}const Mr=["#e6008d","#8d2089","#5f2688"]},341:(e,t,r)=>{function a(e,t){console.log("window trigger: "+e+": "+t),"function"==typeof window.rdt&&window.rdt("track","Lead",{transactionId:e+"-"+(new Date).getTime(),value:t}),"function"==typeof window.gtag&&window.gtag("event",e,{value:t,currency:"EUR"})}r.d(t,{X:()=>a})},9754:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var a=r(2263),n=r(7961),s=r(617),i=r(5696),o=r(9127),c=r(3741),l=r(7400),u=r(4419),h=r(984),d=r(4183),m=r(7294),p=r(341),f=r(5893);let v=!1;async function g(){if(v)return;v=!0,console.log("start animation");if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void console.log("reducedMotion is set to true");if(!(0,d.dZ)())return;const e=await(0,d.N8)();try{await e.insertLocal("beatingvalues",{beatPeriod:0,text1:"JavaScript",text2:"you deserve",color:d.O9[0]})}catch(E){}const t=(0,l.Is)(await e.getLocal("beatingvalues"));(async()=>{for(await(0,u.YB)(w);v;){const e=j(),r=(0,u.YB)(e.timeToNextPeriod);if(e.period%2==0)try{await t.incrementalModify((t=>(t.beatPeriod>=e.period||(t.beatPeriod=e.period,t.color=d.O9[e.period%3],e.period%4==0?t.text1=I(b,e.period)[0]:t.text2=I(x,e.period)[0]),t)))}catch(E){}await r}})();const r=await e.upsertLocal("mousepos",{x:0,y:0,time:0});let a=[];window.addEventListener("mousemove",(e=>{a=[e.clientX,e.clientY]})),(0,s.T)((0,i.R)(window,"mousemove"),(0,i.R)(window,"scroll"),(0,i.R)(window,"resize")).subscribe((()=>{r.incrementalPatch({x:a[0],y:a[1],time:(0,h.z)()})})),function(e){const t=document.getElementsByClassName("tilt-to-mouse"),r=100;function a(e,t,a){const n=a.getBoundingClientRect(),s=-(t-n.y-n.height/2)/r,i=(e-n.x-n.width/2)/r;return`perspective(150px)    rotateX(${D(s)}deg)    rotateY(${D(i)}deg) `}function n(e,t){e.style.transform=a.apply(null,t)}e.$.subscribe((e=>{e._data.data.time&&Array.from(t).forEach((t=>{if(!R(t))return;n(t,(0,l.Is)([e._data.data.x,e._data.data.y]).concat([t]))}))}))}(r),function(e){const t=document.getElementsByClassName("enlarge-on-mouse");function r(e){const t=e.getBoundingClientRect();return{centerX:t.left+t.width/2,centerY:t.top+t.height/2,width:t.width,height:t.height}}function a(e,t){const r=`scale(${t})`;e.style.transform=r}e.$.pipe((0,o.U)((e=>e._data))).subscribe((e=>{e.data.time&&e.data.x&&e.data.y&&Array.from(t).forEach((t=>{if(!R(t))return;const n=r(t),s=e.data.x-n.centerX,i=e.data.y-n.centerY,o=Math.sqrt(s*s+i*i);function c(e){return 1.9^e}let l=1+n.width/2/c(o+300);l>1.5&&(l=1.5),l<1.01&&(l=1),a(t,l)}))}))}(r);const n=document.getElementsByClassName("beating"),m=document.getElementsByClassName("beating-first"),p=document.getElementsByClassName("beating-second"),f=document.getElementsByClassName("beating-number"),g=document.getElementsByClassName("beating-color"),y=document.getElementsByClassName("beating-color-string"),k=[];let _=0;j(),t.$.pipe((0,o.U)((e=>e._data.data)),(0,c.x)(((e,t)=>JSON.stringify(e)===JSON.stringify(t)))).subscribe((e=>{k.forEach((function(e){e(_)})),_+=1;const t=e.color;Array.from(g).forEach((function(e){e.style.backgroundColor=t})),Array.from(y).forEach((function(e){e.innerHTML=t}))})),k.push((function(){Array.from(n).forEach((function(e){e.style.animationDuration=w+"ms",e.classList.remove("animation"),e.offsetWidth,e.classList.add("animation")})),Array.from(m).forEach((function(e){e.style.animationDuration=w+"ms",e.classList.remove("animation"),e.offsetWidth,e.classList.add("animation")})),Array.from(p).forEach((function(e){e.style.animationDuration=w+"ms",e.classList.remove("animation"),e.offsetWidth,e.classList.add("animation")}))})),k.push((function(){Array.from(f).forEach((function(e){N()&&N()&&setTimeout((function(){const t=parseFloat(e.innerHTML)+1;e.innerHTML=t+""}),105)}))}))}function y(){const{siteConfig:e}=(0,a.Z)();return(0,m.useEffect)((()=>(g(),()=>{console.log("stop animation"),v=!1}))),(0,f.jsx)(n.Z,{title:`${e.title}`,description:"RxDB (short for Reactive Database) is a NoSQL-database for JavaScript Applications like Websites, hybrid Apps, Electron-Apps, Progressive Web Apps and Node.js",children:(0,f.jsxs)("main",{children:[(0,f.jsx)("div",{className:"block first centered",children:(0,f.jsx)("div",{className:"content",children:(0,f.jsxs)("div",{className:"inner",children:[(0,f.jsxs)("div",{className:"half",children:[(0,f.jsx)("br",{}),(0,f.jsxs)("h2",{children:["The local ",(0,f.jsx)("b",{className:"underline",children:"Database"})," for"," ",(0,f.jsx)("b",{className:"underline",children:"JavaScript"})," Applications"]}),(0,f.jsx)("br",{}),(0,f.jsxs)("ul",{className:"checked",children:[(0,f.jsx)("li",{children:"Realtime Queries"}),(0,f.jsx)("li",{children:"Realtime Replication"}),(0,f.jsx)("li",{children:"Works Offline"}),(0,f.jsx)("li",{children:"Supports all JavaScript runtimes"}),(0,f.jsx)("li",{children:"Great Performance"})]}),(0,f.jsx)("a",{className:"button",href:"/quickstart.html",target:"_blank",children:"Get Started"}),(0,f.jsx)("div",{className:"clear"})]}),(0,f.jsx)("div",{className:"half",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,f.jsxs)("div",{className:"content-canvas",style:{marginTop:30,marginBottom:30},children:[(0,f.jsx)("div",{className:"device tablet",style:{marginLeft:481,marginTop:117},children:(0,f.jsx)("div",{className:"beating-color",style:{backgroundColor:"rgb(141, 32, 137)"},children:(0,f.jsx)("img",{src:"./files/logo/logo.svg",className:"beating logo animation",alt:"RxDB",style:{animationDuration:"851ms"}})})}),(0,f.jsx)("div",{className:"device desktop",style:{marginTop:"0%"},children:(0,f.jsx)("div",{className:"beating-color",style:{backgroundColor:"rgb(141, 32, 137)"},children:(0,f.jsx)("img",{src:"./files/logo/logo_text.svg",className:"beating logo animation",alt:"RxDB",style:{animationDuration:"851ms",width:"52%"}})})}),(0,f.jsxs)("div",{className:"device server",style:{marginLeft:0,marginTop:168},children:[(0,f.jsx)("div",{className:"beating-color one",style:{backgroundColor:"rgb(141, 32, 137)"}}),(0,f.jsx)("div",{className:"beating-color two",style:{backgroundColor:"rgb(141, 32, 137)"}}),(0,f.jsx)("div",{className:"beating-color three",style:{backgroundColor:"rgb(141, 32, 137)"}})]})]})})]})})}),(0,f.jsx)("a",{href:"https://github.com/pubkey/rxdb",onClick:()=>(0,p.X)("github_trophy_click",.2),target:"_blank",children:(0,f.jsxs)("div",{className:"trophy",children:[(0,f.jsx)("img",{src:"./files/icons/github-star-with-logo.svg",alt:"RxDB github star"}),(0,f.jsxs)("div",{style:{flex:1},children:[(0,f.jsx)("div",{className:"subtitle",children:"Open Source on"}),(0,f.jsx)("div",{className:"title",children:"GitHub"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"valuetitle",children:"stars"}),(0,f.jsxs)("div",{className:"value",children:["19247",(0,f.jsx)("div",{className:"arrow-up",children:" "})]})]})]})}),(0,f.jsx)("div",{className:"block second dark",children:(0,f.jsxs)("div",{className:"content",children:[(0,f.jsxs)("h2",{children:["Realtime applications ",(0,f.jsx)("b",{className:"underline",children:"made easy"})]}),(0,f.jsxs)("p",{children:["From the results of a query, to a single field of a document, with RxDB you can ",(0,f.jsx)("b",{children:"observe everything"}),". This enables you to build realtime applications ",(0,f.jsx)("b",{children:"fast"})," and ",(0,f.jsx)("b",{children:"reliable"}),". It does not matter if the data was changed by"," ",(0,f.jsx)("b",{children:"a user event"}),", ",(0,f.jsx)("b",{children:"another browser tab"})," or by the",(0,f.jsx)("b",{children:" replication"}),"."," ","Whenever your data changes, your UI reflects the new state."]}),(0,f.jsxs)("div",{className:"inner",children:[(0,f.jsxs)("div",{className:"code half",children:[(0,f.jsxs)("fieldset",{className:"samp-wrapper",style:{backgroundColor:"var(--bg-color)"},children:[(0,f.jsx)("legend",{children:"Write"}),(0,f.jsxs)("samp",{children:[(0,f.jsx)("span",{className:"cm-keyword",children:"await "}),(0,f.jsx)("span",{className:"cm-variable",children:"collection"}),".",(0,f.jsx)("span",{className:"cm-method",children:"upsert"}),"(","{",(0,f.jsx)("br",{}),(0,f.jsx)("span",{className:"cm-property",children:"\xa0 id"}),": ",(0,f.jsx)("span",{className:"cm-string",children:"'foobar'"}),",",(0,f.jsx)("br",{}),(0,f.jsx)("span",{className:"cm-property",children:"\xa0 color"}),": ",(0,f.jsxs)("span",{className:"cm-string",children:["'",(0,f.jsx)("span",{className:"beating-color-string beating-color",children:"#e6008d"}),"'"]}),(0,f.jsx)("br",{}),"}",");"]})]}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsxs)("fieldset",{className:"samp-wrapper",style:{backgroundColor:"var(--bg-color)"},children:[(0,f.jsx)("legend",{children:"Observe"}),(0,f.jsxs)("samp",{style:{backgroundColor:"var(--bg-color)"},children:[(0,f.jsx)("span",{className:"cm-keyword",children:"await "}),(0,f.jsx)("span",{className:"cm-variable",children:"collection"}),".",(0,f.jsxs)("span",{className:"cm-method",children:["findOne(",(0,f.jsx)("span",{className:"cm-string",children:"'foobar'"}),")"]}),(0,f.jsx)("br",{}),"\xa0.",(0,f.jsx)("span",{className:"cm-property",children:"$"}),(0,f.jsx)("span",{className:"cm-comment",children:" // get observable"}),(0,f.jsx)("br",{}),"\xa0.",(0,f.jsx)("span",{className:"cm-method",children:"subscribe"}),"(",(0,f.jsx)("span",{className:"cm-def",children:"d"}),(0,f.jsx)("span",{className:"cm-operator",children:" =>"})," ","{",(0,f.jsx)("br",{}),(0,f.jsx)("span",{className:"cm-variable",children:"\xa0\xa0 screen"}),".",(0,f.jsx)("span",{className:"cm-property",children:"backgroundColor"}),(0,f.jsx)("span",{className:"cm-operator",children:" = "}),(0,f.jsx)("span",{className:"cm-variable",children:"d"}),".",(0,f.jsx)("span",{className:"cm-property beating-color",children:"color"}),";",(0,f.jsx)("br",{}),"\xa0","}",");"]})]})]}),(0,f.jsx)("div",{className:"canvas half",children:(0,f.jsxs)("div",{className:"content-canvas",children:[(0,f.jsx)("div",{className:"device tablet",style:{marginLeft:481,marginTop:117},children:(0,f.jsx)("div",{className:"beating-color",children:(0,f.jsx)("img",{src:"./files/logo/logo.svg",className:"beating logo",alt:"RxDB"})})}),(0,f.jsx)("div",{className:"device desktop",style:{marginTop:"0%"},children:(0,f.jsx)("div",{className:"beating-color",children:(0,f.jsx)("img",{src:"./files/logo/logo.svg",className:"beating logo",alt:"RxDB"})})}),(0,f.jsxs)("div",{className:"device server",style:{marginLeft:0,marginTop:168},children:[(0,f.jsx)("div",{className:"beating-color one"}),(0,f.jsx)("div",{className:"beating-color two"}),(0,f.jsx)("div",{className:"beating-color three"})]})]})})]})]})}),(0,f.jsx)("a",{href:"https://twitter.com/intent/user?screen_name=rxdbjs",onClick:()=>(0,p.X)("twitter_trophy_click",.2),target:"_blank",children:(0,f.jsxs)("div",{className:"trophy twitter",children:[(0,f.jsx)("img",{src:"./files/icons/twitter-blue.svg",alt:"RxDB Twitter"}),(0,f.jsxs)("div",{style:{flex:1},children:[(0,f.jsx)("div",{className:"subtitle",children:"Follow on"}),(0,f.jsx)("div",{className:"title",children:"Twitter"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"valuetitle",children:"followers"}),(0,f.jsxs)("div",{className:"value",children:["2843",(0,f.jsx)("div",{className:"arrow-up",children:" "})]})]})]})}),(0,f.jsx)("div",{className:"block replication",children:(0,f.jsxs)("div",{className:"content",children:[(0,f.jsxs)("div",{className:"half left",children:[(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsxs)("h2",{children:["Replicate ",(0,f.jsx)("b",{children:"with your existing infrastructure"})]}),(0,f.jsxs)("p",{children:["RxDB supports replication with a"," ",(0,f.jsx)("a",{href:"/replication-couchdb.html",target:"_blank",children:"CouchDB"})," ","server or any custom"," ",(0,f.jsx)("a",{href:"/replication-graphql.html",target:"_blank",children:"GraphQL"})," ","endpoint which smoothly integrates with your existing infrastructure. Also you can use the replication primitives plugin to create custom replications over any protocol like"," ",(0,f.jsx)("a",{href:"/replication.html",target:"_blank",children:"REST"}),","," ",(0,f.jsx)("a",{href:"/replication-websocket.html",target:"_blank",children:"Websocket"}),","," ",(0,f.jsx)("a",{href:"/replication-webrtc.html",target:"_blank",children:"WebRTC"})," ","or"," ",(0,f.jsx)("a",{href:"/replication-firestore.html",target:"_blank",children:"Firestore"}),"."]})]}),(0,f.jsx)("div",{className:"half right",children:(0,f.jsxs)("div",{className:"replication-icons",children:[(0,f.jsx)("img",{src:"./files/logo/logo.svg",alt:"RxDB",className:"replicate-logo tilt-to-mouse"}),(0,f.jsx)("a",{href:"/replication-graphql.html",target:"_blank",children:(0,f.jsx)("div",{className:"neumorphism-circle-xl centered replicate-graphql enlarge-on-mouse",children:(0,f.jsx)("img",{src:"./files/icons/graphql-text.svg",alt:"GraphQL",className:"protocol"})})}),(0,f.jsx)("a",{href:"/replication-couchdb.html",target:"_blank",children:(0,f.jsx)("div",{className:"neumorphism-circle-xl centered replicate-couchdb enlarge-on-mouse",children:(0,f.jsx)("img",{src:"./files/icons/couchdb-text.svg",alt:"CouchDB",className:"protocol"})})}),(0,f.jsxs)("div",{className:"neumorphism-circle-xs centered replicate-rest enlarge-on-mouse",children:["{"," REST ","}"]}),(0,f.jsx)("a",{href:"/replication-websocket.html",target:"_blank",children:(0,f.jsx)("div",{className:"neumorphism-circle-xs centered replicate-websocket enlarge-on-mouse",children:"websocket"})}),(0,f.jsx)("a",{href:"/replication-webrtc.html",target:"_blank",children:(0,f.jsx)("div",{className:"neumorphism-circle-xs centered replicate-webrtc enlarge-on-mouse",children:"WebRTC"})})]})}),(0,f.jsx)("div",{className:"clear"})]})}),(0,f.jsx)("a",{href:"https://rxdb.info/chat.html",onClick:()=>(0,p.X)("discord_trophy_click",.2),target:"_blank",children:(0,f.jsxs)("div",{className:"trophy discord",children:[(0,f.jsx)("img",{src:"./files/icons/discord.svg",alt:"RxDB Discord chat"}),(0,f.jsxs)("div",{style:{flex:1},children:[(0,f.jsx)("div",{className:"subtitle",children:"Chat on"}),(0,f.jsx)("div",{className:"title",children:"Discord"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"valuetitle",children:"members"}),(0,f.jsxs)("div",{className:"value",children:["414",(0,f.jsx)("div",{className:"arrow-up",children:" "})]})]})]})}),(0,f.jsxs)("div",{className:"block offline-first dark",children:[(0,f.jsx)("div",{className:"offline-image-wrapper",children:(0,f.jsx)("img",{src:"files/icons/wifi/wifi_1a202c.svg",className:"offline-image beating-second",alt:"offline"})}),(0,f.jsxs)("div",{className:"content",children:[(0,f.jsxs)("h2",{children:["Online ",(0,f.jsx)("b",{className:"underline",children:"is optional"})]}),(0,f.jsxs)("div",{className:"full-width",children:[(0,f.jsx)("div",{className:"half left",children:(0,f.jsxs)("p",{children:["RxDB follows the"," ",(0,f.jsx)("a",{href:"/offline-first.html",target:"_blank",children:"Offline First"})," ","paradigm where an application must work as well offline as it does online. This is done by persisting data on the client side and replicating it in the background. RxDB can even be used solely on the client side, with no backend at all."]})}),(0,f.jsx)("div",{className:"half right",children:(0,f.jsxs)("ul",{className:"checked",children:[(0,f.jsxs)("li",{children:["Your application still ",(0,f.jsx)("b",{children:"works offline"})]}),(0,f.jsxs)("li",{children:["Increases ",(0,f.jsx)("b",{children:"perceived performance"})]}),(0,f.jsxs)("li",{children:["Easier and ",(0,f.jsx)("b",{children:"faster implementation"})]}),(0,f.jsxs)("li",{children:["Needs less backend resources and ",(0,f.jsx)("b",{children:"scales better"})]})]})})]})]})]}),(0,f.jsx)("div",{className:"block frameworks",children:(0,f.jsxs)("div",{className:"content",children:[(0,f.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/angular",target:"_blank",children:(0,f.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"-10%",left:"10%"},children:[(0,f.jsx)("img",{src:"./files/icons/angular.svg",alt:"angular"}),"Angular"]})}),(0,f.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"10%",left:"58%"},children:[(0,f.jsx)("img",{src:"./files/icons/capacitor.svg",alt:"capacitor"}),"Capacitor"]}),(0,f.jsxs)("div",{className:"neumorphism-circle-s circle centered enlarge-on-mouse",style:{top:"-4%",left:"44%"},children:[(0,f.jsx)("img",{src:"./files/icons/deno.svg",alt:"deno"}),"Deno"]}),(0,f.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/node",target:"_blank",children:(0,f.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"-5%",left:"85%"},children:[(0,f.jsx)("img",{src:"./files/icons/nodejs.svg",alt:"Node.js"}),"Node.js"]})}),(0,f.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/react",target:"_blank",children:(0,f.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"4%",left:"26%"},children:[(0,f.jsx)("img",{src:"./files/icons/react.svg",alt:"React"}),"React"]})}),(0,f.jsxs)("div",{className:"neumorphism-circle-s circle centered enlarge-on-mouse",style:{top:"15%",left:"90%",marginLeft:"-35px"},children:[(0,f.jsx)("img",{src:"./files/icons/svelte.svg",alt:"Svelte"}),"Svelte"]}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsxs)("h2",{children:["Flexible ",(0,f.jsx)("b",{className:"underline",children:"storage layer"})]}),(0,f.jsxs)("p",{children:["RxDB is based on a storage interface that enables you to swap out the underlying storage engine. This increases code reuse because the same database code can be used in ",(0,f.jsx)("b",{children:"any JavaScript runtime"})," ","by just switching out the storage settings.",(0,f.jsx)("br",{})]}),(0,f.jsxs)("div",{className:"below-text",children:[(0,f.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/electron",target:"_blank",children:(0,f.jsxs)("div",{className:"neumorphism-circle-s circle centered enlarge-on-mouse",style:{top:"2%",left:"18%"},children:[(0,f.jsx)("img",{src:"./files/icons/electron.svg",alt:"electron"}),"Electron"]})}),(0,f.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/vue",target:"_blank",children:(0,f.jsxs)("div",{className:"neumorphism-circle-s circle centered enlarge-on-mouse",style:{top:"3%",left:"45%"},children:[(0,f.jsx)("img",{src:"./files/icons/vuejs.svg",alt:"Vue.js"}),"Vue.js"]})}),(0,f.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/ionic2",target:"_blank",children:(0,f.jsxs)("div",{className:"neumorphism-circle-s circle centered enlarge-on-mouse",style:{top:"2%",left:"71%"},children:[(0,f.jsx)("img",{src:"./files/icons/ionic.svg",alt:"ionic"}),"Ionic"]})}),(0,f.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"46%",left:"11%"},children:[(0,f.jsx)("img",{src:"./files/icons/nativescript.svg",alt:"NativeScript"}),"NativeScript"]}),(0,f.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/react-native",target:"_blank",children:(0,f.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"45%",left:"35%"},children:[(0,f.jsx)("img",{src:"./files/icons/react.svg",alt:"React Native"}),"React Native"]})}),(0,f.jsxs)("div",{className:"neumorphism-circle-m circle centered enlarge-on-mouse",style:{top:"45%",left:"62%"},children:[(0,f.jsx)("img",{src:"./files/icons/nextjs.svg",alt:"Next.js"}),"Next.js"]}),(0,f.jsx)("a",{href:"https://github.com/pubkey/rxdb/tree/master/examples/flutter",target:"_blank",children:(0,f.jsxs)("div",{className:"neumorphism-circle-s circle centered enlarge-on-mouse",style:{top:"40%",left:"86%"},children:[(0,f.jsx)("img",{src:"./files/icons/flutter.svg",alt:"Flutter"}),"Flutter"]})})]})]})}),(0,f.jsx)("div",{className:"block fifth dark",children:(0,f.jsx)("div",{className:"content centered",children:(0,f.jsxs)("div",{className:"inner",children:[(0,f.jsxs)("h2",{children:["Trusted and ",(0,f.jsx)("b",{className:"underline",children:"open source"})]}),(0,f.jsxs)("div",{className:"box dark",children:[(0,f.jsx)("img",{src:"files/icons/github-star.svg",alt:"github star"}),(0,f.jsx)("div",{className:"label",children:"Github Stars"}),(0,f.jsx)("a",{className:"value",href:"https://github.com/pubkey/rxdb",rel:"noopener",target:"_blank",children:"19247"}),(0,f.jsx)("div",{className:"clear"})]}),(0,f.jsxs)("div",{className:"box dark",children:[(0,f.jsx)("img",{src:"files/icons/download.svg",alt:"npm downloads"}),(0,f.jsx)("div",{className:"label",children:"npm downloads"}),(0,f.jsx)("a",{className:"value beating-number",href:"https://www.npmjs.com/package/rxdb",rel:"noopener",target:"_blank",children:"238572"}),(0,f.jsx)("div",{className:"clear"})]}),(0,f.jsx)("div",{className:"clear"}),(0,f.jsxs)("div",{className:"box dark",children:[(0,f.jsx)("img",{src:"files/icons/person.svg",alt:"contributor"}),(0,f.jsx)("div",{className:"label",children:"Contributors"}),(0,f.jsx)("a",{className:"value",href:"https://github.com/pubkey/rxdb/graphs/contributors",rel:"noopener",target:"_blank",children:"133"}),(0,f.jsx)("div",{className:"clear"})]}),(0,f.jsxs)("div",{className:"box dark",children:[(0,f.jsx)("img",{src:"files/icons/commit.svg",alt:"commit"}),(0,f.jsx)("div",{className:"label",children:"Commits"}),(0,f.jsx)("a",{className:"value",href:"https://github.com/pubkey/rxdb/commits/master",rel:"noopener",target:"_blank",children:"6891"}),(0,f.jsx)("div",{className:"clear"})]}),(0,f.jsx)("div",{className:"clear"}),(0,f.jsxs)("div",{className:"box dark",children:[(0,f.jsx)("img",{src:"files/icons/gear.svg",alt:"gear"}),(0,f.jsx)("div",{className:"label",children:"Projects build with RxDB"}),(0,f.jsx)("a",{className:"value",href:"https://github.com/pubkey/rxdb/network/dependents?package_id=UGFja2FnZS0xODM0NzAyMw%3D%3D",rel:"noopener",target:"_blank",children:"825"}),(0,f.jsx)("div",{className:"clear"})]}),(0,f.jsxs)("div",{className:"box dark",children:[(0,f.jsx)("img",{src:"files/icons/twitter.svg",alt:"twitter"}),(0,f.jsx)("div",{className:"label",children:"Twitter followers"}),(0,f.jsx)("a",{className:"value",href:"https://twitter.com/intent/user?screen_name=rxdbjs",rel:"noopener",target:"_blank",children:"2843"}),(0,f.jsx)("div",{className:"clear"})]}),(0,f.jsx)("div",{className:"clear"})]})})}),(0,f.jsx)("div",{className:"block sixth",children:(0,f.jsxs)("div",{className:"content",children:[(0,f.jsx)("h2",{children:"Pricing Models"}),(0,f.jsx)("div",{className:"inner",children:(0,f.jsxs)("div",{className:"buy-options",children:[(0,f.jsx)("div",{className:"buy-option bg-gradient-left-top",children:(0,f.jsxs)("div",{className:"buy-option-inner",children:[(0,f.jsxs)("div",{className:"buy-option-title",children:[(0,f.jsx)("h2",{children:"RxDB Basics"}),(0,f.jsx)("div",{className:"price",children:"Free & Open Source"})]}),(0,f.jsx)("div",{className:"buy-option-features",children:(0,f.jsxs)("ul",{children:[(0,f.jsx)("li",{children:"Basic RxStorages"}),(0,f.jsx)("li",{children:"Realtime Replication"}),(0,f.jsx)("li",{children:"Live Queries"}),(0,f.jsx)("li",{children:"Schema Validation"}),(0,f.jsx)("li",{children:"Multi-Tab Support"}),(0,f.jsx)("li",{children:"Encryption"}),(0,f.jsx)("li",{children:"Compression"})]})}),(0,f.jsx)("a",{href:"https://github.com/pubkey/rxdb",target:"_blank",rel:"noopener",onClick:()=>(0,p.X)("goto_code",.2),children:(0,f.jsx)("div",{className:"buy-option-action bg-top hover-shadow-top",children:"Get the Code"})})]})}),(0,f.jsx)("div",{className:"buy-option bg-gradient-right-top",children:(0,f.jsxs)("div",{className:"buy-option-inner",children:[(0,f.jsxs)("div",{className:"buy-option-title",children:[(0,f.jsx)("h2",{children:"Premium Plugins"}),(0,f.jsx)("div",{className:"price",children:"for professionals to get the most out of RxDB"})]}),(0,f.jsx)("div",{className:"buy-option-features",children:(0,f.jsxs)("ul",{children:[(0,f.jsx)("li",{children:(0,f.jsx)("a",{href:"https://rxdb.info/rx-storage-sqlite.html",target:"_blank",children:"SQLite RxStorage"})}),(0,f.jsx)("li",{children:(0,f.jsx)("a",{href:"https://rxdb.info/rx-storage-opfs.html",target:"_blank",children:"OPFS RxStorage"})}),(0,f.jsx)("li",{children:(0,f.jsx)("a",{href:"https://rxdb.info/rx-storage-indexeddb.html",target:"_blank",children:"IndexedDB RxStorage"})}),(0,f.jsx)("li",{children:(0,f.jsx)("a",{href:"https://rxdb.info/rx-storage-memory-synced.html",target:"_blank",children:"Memory-Synced RxStorage"})}),(0,f.jsx)("li",{children:(0,f.jsx)("a",{href:"https://rxdb.info/rx-storage-sharding.html",target:"_blank",children:"Sharding Plugin"})}),(0,f.jsx)("li",{children:(0,f.jsx)("a",{href:"https://rxdb.info/query-optimizer.html",target:"_blank",children:"Query Optimizer"})}),(0,f.jsx)("li",{children:(0,f.jsx)("a",{href:"https://rxdb.info/migration-storage.html",target:"_blank",children:"Storage Migrator"})}),(0,f.jsx)("li",{children:(0,f.jsx)("a",{href:"https://rxdb.info/rx-storage-localstorage-meta-optimizer.html",target:"_blank",children:"RxStorage Localstorage Meta Optimizer"})}),(0,f.jsx)("li",{children:(0,f.jsx)("a",{href:"https://rxdb.info/rx-storage-shared-worker.html",target:"_blank",children:"Shared Worker"})}),(0,f.jsx)("li",{children:(0,f.jsx)("a",{href:"https://rxdb.info/rx-storage-worker.html",target:"_blank",children:"Worker"})})]})}),(0,f.jsx)("a",{href:"/premium",onClick:()=>(0,p.X)("premium_request",1),children:(0,f.jsx)("div",{className:"buy-option-action bg-middle hover-shadow-middle",children:"Request Premium"})})]})}),(0,f.jsx)("div",{className:"buy-option bg-gradient-left-top",children:(0,f.jsxs)("div",{className:"buy-option-inner",children:[(0,f.jsxs)("div",{className:"buy-option-title",children:[(0,f.jsx)("h2",{children:"Consulting Session"}),(0,f.jsx)("div",{className:"price",children:"fast in person consulting"})]}),(0,f.jsx)("div",{className:"buy-option-features",children:(0,f.jsxs)("p",{children:["Book a one hour consulting session with the RxDB maintainer. I will answer all your questions, give proposals for your use case and we can even do a pair programming session if you have a specific problem in your source code.",(0,f.jsx)("br",{}),"You can book this by doing a one-time donation via github sponsors."]})}),(0,f.jsx)("a",{href:"https://github.com/sponsors/pubkey?frequency=one-time&sponsor=pubkey",target:"_blank",onClick:()=>(0,p.X)("consulting_session_request",1.5),children:(0,f.jsx)("div",{className:"buy-option-action bg-bottom hover-shadow-bottom",children:"Book Now"})})]})})]})})]})}),(0,f.jsx)("div",{className:"block last dark",children:(0,f.jsxs)("div",{className:"content",children:[(0,f.jsxs)("h2",{children:["Start using ",(0,f.jsx)("b",{className:"underline",children:"RxDB"})," today"]}),(0,f.jsxs)("div",{className:"buttons full-width",children:[(0,f.jsx)("a",{href:"/quickstart.html",rel:"noopener",target:"_blank",onClick:()=>(0,p.X)("start_now",.4),children:(0,f.jsx)("div",{className:"button get-premium",style:{left:"50%",top:"20%",marginLeft:"-122px"},children:"Start now"})}),(0,f.jsx)("a",{href:"https://rxdb.info/newsletter.html",rel:"noopener",target:"_blank",onClick:()=>(0,p.X)("get_newsletter",.4),children:(0,f.jsx)("div",{className:"button",style:{left:"25%",marginLeft:"-90px"},children:"Get the Newsletter"})}),(0,f.jsx)("a",{href:"https://rxdb.info/chat.html",rel:"noopener",target:"_blank",onClick:()=>(0,p.X)("join_chat",.4),children:(0,f.jsx)("div",{className:"button",style:{left:"77%",top:"6%",marginLeft:"-70.5px"},children:"Join the Chat"})}),(0,f.jsx)("a",{href:"/premium",onClick:()=>(0,p.X)("premium_request",1),children:(0,f.jsx)("div",{className:"button",style:{top:"40%",left:"20%",marginLeft:"-70.5px"},children:"Get Premium"})}),(0,f.jsx)("a",{href:"https://twitter.com/intent/user?screen_name=rxdbjs",rel:"noopener",target:"_blank",onClick:()=>(0,p.X)("follow_twitter",.4),children:(0,f.jsx)("div",{className:"button",style:{top:"44%",left:"73%",marginLeft:"-85px"},children:"Follow on Twitter"})}),(0,f.jsx)("a",{href:"https://github.com/pubkey/rxdb",rel:"noopener",target:"_blank",onClick:()=>(0,p.X)("goto_code",.4),children:(0,f.jsx)("div",{className:"button",style:{top:"54%",left:"32%",marginLeft:"-70px"},children:"Get the Code"})})]})]})})]})})}const b=["NoSQL","OfflineFirst","JavaScript","observable","reactive","realtime","client side","fast"],x=["for the Web","for Node.js","for Browsers","for Capacitor","for Electron","for hybrid apps","for PWAs","for React Native","for NativeScript","for UI apps","you deserve","that syncs"],w=851;function j(){const e=((new Date).getTime()-196e7)/w,t=Math.floor(e);return{ratio:e,period:t,timeToNextPeriod:(e-t)*w}}const k=22,_=-1*k;function D(e){return e<_?_:e>k?k:e}function N(){return Math.random()<.5}function I(e,t){let r,a,n=(e=e.slice(0)).length;for(;n;)a=Math.floor(E(t)*n--),r=e[n],e[n]=e[a],e[a]=r,++t;return e}function E(e){const t=1e4*Math.sin(e++);return t-Math.floor(t)}function R(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}},6087:(e,t,r)=>{function a(e){return e[e.length-1]}function n(e){return Array.isArray(e)?e.slice(0):[e]}function s(e){return Array.isArray(e)}function i(e){return null!=e}function o(e,t){var r=0,a=-1;for(var n of e){if(!t(n,a+=1))break;r+=1}return r}function c(e,t){for(var r=t.length,a=0;a<r;++a){var n=t[a];e.push(n)}}r.d(t,{AD:()=>s,S7:()=>i,SI:()=>a,gu:()=>c,qo:()=>n,r0:()=>o})},7400:(e,t,r)=>{function a(e){if(!e)throw new Error("ensureNotFalsy() is falsy");return e}r.d(t,{Is:()=>a,kv:()=>n});var n={bufferSize:1,refCount:!0}},4419:(e,t,r)=>{function a(){return new Promise((e=>setTimeout(e,0)))}function n(e){return void 0===e&&(e=0),new Promise((t=>setTimeout(t,e)))}r.d(t,{$Y:()=>o,C2:()=>u,Y3:()=>a,YB:()=>n,Ze:()=>h,kZ:()=>s,m5:()=>i,y$:()=>c});Promise.resolve(!0);var s=Promise.resolve(!1),i=Promise.resolve(null),o=Promise.resolve();function c(e){return void 0===e&&(e=1e4),"function"==typeof requestIdleCallback?new Promise((t=>{requestIdleCallback((()=>t()),{timeout:e})})):n(0)}var l=o;function u(e){return void 0===e&&(e=void 0),l=l.then((()=>c(e)))}function h(e,t){return e.reduce(((e,t)=>e.then(t)),Promise.resolve(t))}},984:(e,t,r)=>{r.d(t,{z:()=>n});var a=0;function n(){var e=Date.now();(e+=.01)<=a&&(e=a+.01);var t=parseFloat(e.toFixed(2));return a=t,t}}}]);